

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="fr" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="fr" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="David Gayerie" name="author" />
<meta content="Python 3 - Les fondamentaux du langage" name="description" />
<meta content="Python, programmation objet, POO, langage de programmation" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Héritage et polymorphisme &mdash; Documentation Boomerang Consulting - Python 3 </title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom_rtd_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Les exceptions et la gestion des erreurs" href="exception.html" />
    <link rel="prev" title="La programmation orientée objet" href="objet.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Boomerang Consulting - Python 3
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Recherche dans les pages" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Python 3</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#python-2-et-python-3">Python 2 et Python 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#licence-logiciel">Licence logiciel</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#les-principales-caracteristiques-du-langage">Les principales caractéristiques du langage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#oriente-objet">Orienté objet</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#courbe-d-apprentissage-lineaire">Courbe d’apprentissage linéaire</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#compile-et-interprete">Compilé et interprété</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#typage-dynamique">Typage dynamique</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#les-domaines-d-application">Les domaines d’application</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#les-differentes-implementations-de-python">Les différentes implémentations de Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#communaute-et-organisation">Communauté et organisation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="execution.html">Console et exécution de fichiers source</a><ul>
<li class="toctree-l2"><a class="reference internal" href="execution.html#la-console">La console</a></li>
<li class="toctree-l2"><a class="reference internal" href="execution.html#les-fichiers-sources">Les fichiers sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="execution.html#lancement-en-mode-interactif">Lancement en mode interactif</a></li>
<li class="toctree-l2"><a class="reference internal" href="execution.html#lancement-d-un-programme-hors-de-la-console">Lancement d’un programme hors de la console</a></li>
<li class="toctree-l2"><a class="reference internal" href="execution.html#notion-de-bloc-et-d-indentation">Notion de bloc et d’indentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="execution.html#les-commentaires">Les commentaires</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="type_et_variable.html">Types et variables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="type_et_variable.html#nombres-et-calcul-arithmetique">Nombres et calcul arithmétique</a></li>
<li class="toctree-l2"><a class="reference internal" href="type_et_variable.html#les-variables">Les variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="type_et_variable.html#la-chaine-de-caracteres">La chaîne de caractères</a><ul>
<li class="toctree-l3"><a class="reference internal" href="type_et_variable.html#formatage-de-chaine-de-caracteres">Formatage de chaîne de caractères</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="type_et_variable.html#le-type-booleen">Le type booléen</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fonction.html">Les fonctions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#appeler-une-fonction">Appeler une fonction</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#les-fonctions-utiles-dans-la-console-python">Les fonctions utiles dans la console Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#les-fonctions-de-conversion-de-type">Les fonctions de conversion de type</a><ul>
<li class="toctree-l3"><a class="reference internal" href="fonction.html#convertir-en-nombre">Convertir en nombre</a></li>
<li class="toctree-l3"><a class="reference internal" href="fonction.html#convertir-en-valeur-booleenne">Convertir en valeur booléenne</a></li>
<li class="toctree-l3"><a class="reference internal" href="fonction.html#convertir-en-chaine-de-caracteres">Convertir en chaîne de caractères</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#exercices">Exercices</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#declarer-une-fonction">Déclarer une fonction</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#documenter-une-fonction">Documenter une fonction</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#les-valeurs-de-retour">Les valeurs de retour</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#les-parametres-nommes">Les paramètres nommés</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#valeur-par-defaut-des-parametres">Valeur par défaut des paramètres</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#fonction-et-portee-des-variables">Fonction et portée des variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#id1">Exercices</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#variable-globale-et-fonction">Variable globale et fonction</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#notion-de-methode">Notion de méthode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="list.html">La liste (<em>list</em>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="list.html#creer-une-liste">Créer une liste</a></li>
<li class="toctree-l2"><a class="reference internal" href="list.html#acceder-aux-elements">Accéder aux éléments</a></li>
<li class="toctree-l2"><a class="reference internal" href="list.html#les-operations-sur-les-listes">Les opérations sur les listes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="list.html#connaitre-la-taille-d-une-liste">Connaître la taille d’une liste</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html#supprimer-un-element-d-une-liste">Supprimer un élément d’une liste</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html#ajouter-deux-listes-ensemble">Ajouter deux listes ensemble</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html#creer-une-liste-etendue">Créer une liste étendue</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html#savoir-si-un-element-est-present-dans-une-liste">Savoir si un élément est présent dans une liste</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html#comparer-deux-listes">Comparer deux listes</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html#connaitre-le-plus-grand-element-d-une-liste">Connaître le plus grand élément d’une liste</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html#connaitre-le-plus-petit-element-d-une-liste">Connaître le plus petit élément d’une liste</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html#decouper-une-liste">Découper une liste</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html#copier-une-liste">Copier une liste</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="list.html#quelques-methodes-pour-les-listes">Quelques méthodes pour les listes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tuple.html">Le n-uplet (<em>tuple</em>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tuple.html#creer-un-tuple">Créer un tuple</a></li>
<li class="toctree-l2"><a class="reference internal" href="tuple.html#acceder-aux-elements">Accéder aux éléments</a></li>
<li class="toctree-l2"><a class="reference internal" href="tuple.html#les-operations-sur-les-tuples">Les opérations sur les tuples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tuple.html#connaitre-la-taille-d-un-tuple">Connaître la taille d’un tuple</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuple.html#ajouter-deux-tuples-ensemble">Ajouter deux tuples ensemble</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuple.html#creer-un-tuple-etendu">Créer un tuple étendu</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuple.html#savoir-si-un-element-est-present-dans-un-tuple">Savoir si un élément est présent dans un tuple</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuple.html#comparer-deux-tuples">Comparer deux tuples</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuple.html#connaitre-le-plus-grand-element-d-un-tuple">Connaître le plus grand élément d’un tuple</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuple.html#connaitre-le-plus-petit-element-d-une-tuple">Connaître le plus petit élément d’une tuple</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuple.html#decouper-un-tuple">Découper un tuple</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuple.html#compter-les-occurrences-dans-un-tuple">Compter les occurrences dans un tuple</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tuple.html#listes-et-tuples">Listes et tuples</a></li>
<li class="toctree-l2"><a class="reference internal" href="tuple.html#les-chaines-de-caracteres-comme-tuple">Les chaînes de caractères comme tuple</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="set.html">L’ensemble (<em>set</em>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="set.html#creer-un-ensemble">Créer un ensemble</a></li>
<li class="toctree-l2"><a class="reference internal" href="set.html#acceder-aux-elements">Accéder aux éléments</a></li>
<li class="toctree-l2"><a class="reference internal" href="set.html#les-operations-sur-les-ensembles">Les opérations sur les ensembles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="set.html#connaitre-la-taille-d-un-ensemble">Connaître la taille d’un ensemble</a></li>
<li class="toctree-l3"><a class="reference internal" href="set.html#savoir-si-un-element-est-present-dans-un-ensemble">Savoir si un élément est présent dans un ensemble</a></li>
<li class="toctree-l3"><a class="reference internal" href="set.html#comparer-deux-ensembles">Comparer deux ensembles</a></li>
<li class="toctree-l3"><a class="reference internal" href="set.html#connaitre-le-plus-grand-element-d-un-ensemble">Connaître le plus grand élément d’un ensemble</a></li>
<li class="toctree-l3"><a class="reference internal" href="set.html#connaitre-le-plus-petit-element-d-un-ensemble">Connaître le plus petit élément d’un ensemble</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="set.html#quelques-methodes-pour-les-ensembles">Quelques méthodes pour les ensembles</a></li>
<li class="toctree-l2"><a class="reference internal" href="set.html#ensemble-liste-et-tuple">Ensemble, liste et tuple</a></li>
<li class="toctree-l2"><a class="reference internal" href="set.html#ensemble-fige">Ensemble figé</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dict.html">Le dictionnaire</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dict.html#creer-un-dictionnaire">Créer un dictionnaire</a></li>
<li class="toctree-l2"><a class="reference internal" href="dict.html#acceder-aux-elements">Accéder aux éléments</a></li>
<li class="toctree-l2"><a class="reference internal" href="dict.html#les-operations-sur-les-dictionnaires">Les opérations sur les dictionnaires</a><ul>
<li class="toctree-l3"><a class="reference internal" href="dict.html#connaitre-la-taille-d-un-dictionnaire">Connaître la taille d’un dictionnaire</a></li>
<li class="toctree-l3"><a class="reference internal" href="dict.html#supprimer-une-cle-d-un-dictionnaire">Supprimer une clé d’un dictionnaire</a></li>
<li class="toctree-l3"><a class="reference internal" href="dict.html#savoir-si-une-cle-est-presente-dans-un-dictionnaire">Savoir si une clé est présente dans un dictionnaire</a></li>
<li class="toctree-l3"><a class="reference internal" href="dict.html#comparer-deux-dictionnaires">Comparer deux dictionnaires</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="dict.html#quelques-methodes-pour-les-dictionnaires">Quelques méthodes pour les dictionnaires</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="structures_de_controle.html">Les structures de contrôle</a><ul>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#l-indentation-du-code">L’indentation du code</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#structures-de-decision">Structures de décision</a><ul>
<li class="toctree-l3"><a class="reference internal" href="structures_de_controle.html#l-instruction-if">L’instruction <em>if</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="structures_de_controle.html#l-instruction-else">L’instruction <em>else</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="structures_de_controle.html#l-instruction-elif">L’instruction <em>elif</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="structures_de_controle.html#l-operateur-ternaire">L’opérateur ternaire</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#exercice">Exercice</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#structures-iteratives">Structures itératives</a><ul>
<li class="toctree-l3"><a class="reference internal" href="structures_de_controle.html#l-instruction-while">L’instruction <em>while</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="structures_de_controle.html#l-instruction-for">L’instruction <em>for</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="structures_de_controle.html#la-fonction-range">La fonction <em>range</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="structures_de_controle.html#interrompre-un-bloc-d-iteration">Interrompre un bloc d’itération</a></li>
<li class="toctree-l3"><a class="reference internal" href="structures_de_controle.html#structure-iterative-avec-else">Structure itérative avec <em>else</em></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#id1">Exercice</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fonction_avance.html">Les fonctions (notions avancées)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fonction_avance.html#decompactage-des-parametres">décompactage des paramètres</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction_avance.html#compactage-des-parametres">compactage des paramètres</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction_avance.html#appel-recursif-de-fonction">Appel récursif de fonction</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction_avance.html#declaration-de-fonction-dans-une-fonction">Déclaration de fonction dans une fonction</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction_avance.html#la-fonction-comme-type-python">La fonction comme type Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction_avance.html#les-fonctions-anonymes-lambdas">Les fonctions anonymes (lambdas)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="list_comprehension.html">Liste en compréhension</a><ul>
<li class="toctree-l2"><a class="reference internal" href="list_comprehension.html#dictionnaire-en-comprehension">Dictionnaire en compréhension</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="module.html">Les modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="module.html#le-module-pour-prevenir-la-collision-de-nom">Le module pour prévenir la collision de nom</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#la-bibliotheque-standard-python">La bibliothèque standard Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#importer-un-module">Importer un module</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#importer-directement-un-nom">Importer directement un nom</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#creer-un-module-a-partir-d-un-fichier">Créer un module à partir d’un fichier</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#module-executable">Module exécutable</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#creer-un-module-a-partir-d-un-repertoire">Créer un module à partir d’un répertoire</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#module-repertoire-executable">Module répertoire exécutable</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#chemin-des-modules">Chemin des modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#les-packages">Les <em>packages</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="module.html#import-relatif">Import relatif</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="module.html#exercices">Exercices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="decorateur.html">Les décorateurs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="decorateur.html#un-premier-decorateur">Un premier décorateur</a></li>
<li class="toctree-l2"><a class="reference internal" href="decorateur.html#decorer-des-fonctions-avec-des-parametres-et-des-valeurs-de-retour">Décorer des fonctions avec des paramètres et des valeurs de retour</a></li>
<li class="toctree-l2"><a class="reference internal" href="decorateur.html#decorateur-avec-des-parametres">Décorateur avec des paramètres</a></li>
<li class="toctree-l2"><a class="reference internal" href="decorateur.html#conserver-la-documentation-malgre-l-utilisation-d-un-decorateur">Conserver la documentation malgré l’utilisation d’un décorateur</a></li>
<li class="toctree-l2"><a class="reference internal" href="decorateur.html#appliquer-plusieurs-decorateurs">Appliquer plusieurs décorateurs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="objet.html">La programmation orientée objet</a><ul>
<li class="toctree-l2"><a class="reference internal" href="objet.html#la-classe-et-les-instances">La classe et les instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#les-attributs">Les attributs</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#les-attributs-implicites">Les attributs implicites</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#les-methodes">Les méthodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#le-constructeur">Le constructeur</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#les-proprietes">Les propriétés</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#les-attributs-de-classe">Les attributs de classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#methodes-de-classe">Méthodes de classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#methodes-statiques">Méthodes statiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#visibilite-des-attributs-et-des-methodes">Visibilité des attributs et des méthodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#fermer-la-liste-des-attributs">Fermer la liste des attributs</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#creer-des-objets-avec-des-attributs-constants">Créer des objets avec des attributs constants</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Héritage et polymorphisme</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#l-heritage">L’héritage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#constructeur-et-heritage">Constructeur et héritage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#heritage-et-mutualisation-de-code">Héritage et mutualisation de code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#la-classe-object">La classe <em>object</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="#le-polymorphisme">Le polymorphisme</a></li>
<li class="toctree-l2"><a class="reference internal" href="#polymorphisme-et-duck-typing">Polymorphisme et <em>duck typing</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="#masquer-les-attributs-et-les-methodes-pour-les-classe-filles">Masquer les attributs et les méthodes pour les classe filles</a></li>
<li class="toctree-l2"><a class="reference internal" href="#heritage-multiple-et-mixin">Héritage multiple et <em>mixin</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#l-heritage-en-diamant">L’héritage en diamant</a></li>
<li class="toctree-l3"><a class="reference internal" href="#appel-des-constructeurs">Appel des constructeurs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#les-mixins">Les mixins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#la-meta-classe">La méta-classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="#classes-et-methodes-abstraites">Classes et méthodes abstraites</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="exception.html">Les exceptions et la gestion des erreurs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="exception.html#traiter-une-exception">Traiter une exception</a><ul>
<li class="toctree-l3"><a class="reference internal" href="exception.html#recuperer-les-donnees-d-une-exception">Récupérer les données d’une exception</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="exception.html#clause-else">Clause <em>else</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="exception.html#post-traitement">Post-traitement</a></li>
<li class="toctree-l2"><a class="reference internal" href="exception.html#lever-une-exception">Lever une exception</a></li>
<li class="toctree-l2"><a class="reference internal" href="exception.html#creer-son-exception">Créer son exception</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dunder.html">Les méthodes spéciales (<em>dunders</em>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dunder.html#methodes-speciales-elementaires">Méthodes spéciales élémentaires</a></li>
<li class="toctree-l2"><a class="reference internal" href="dunder.html#methodes-speciales-pour-les-conversions">Méthodes spéciales pour les conversions</a></li>
<li class="toctree-l2"><a class="reference internal" href="dunder.html#methodes-speciales-pour-les-operateurs-unaires">Méthodes spéciales pour les opérateurs unaires</a></li>
<li class="toctree-l2"><a class="reference internal" href="dunder.html#methodes-speciales-pour-les-operations-arithmetiques">Méthodes spéciales pour les opérations arithmétiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="dunder.html#methodes-speciales-pour-la-comparaison">Méthodes spéciales pour la comparaison</a></li>
<li class="toctree-l2"><a class="reference internal" href="dunder.html#methodes-speciales-pour-les-conteneurs">Méthodes spéciales pour les conteneurs</a></li>
<li class="toctree-l2"><a class="reference internal" href="dunder.html#tout-est-objet">Tout est objet !</a></li>
<li class="toctree-l2"><a class="reference internal" href="dunder.html#les-fonctions-comme-objet">Les fonctions comme objet</a></li>
<li class="toctree-l2"><a class="reference internal" href="dunder.html#les-classes-comme-objet">Les classes comme objet</a></li>
<li class="toctree-l2"><a class="reference internal" href="dunder.html#et-bien-d-autres-methodes-speciales">Et bien d’autres méthodes spéciales…</a></li>
<li class="toctree-l2"><a class="reference internal" href="dunder.html#methodes-speciales-et-classes-abstraites">Méthodes spéciales et classes abstraites</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="iterateur_generateur.html">Itérateurs et Générateurs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="iterateur_generateur.html#les-iterateurs">Les itérateurs</a></li>
<li class="toctree-l2"><a class="reference internal" href="iterateur_generateur.html#les-fonctions-iter-et-next">Les fonctions iter() et next()</a></li>
<li class="toctree-l2"><a class="reference internal" href="iterateur_generateur.html#les-generateurs">Les générateurs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="iterateur_generateur.html#les-fonctions-generatrices-avec-yield">Les fonctions génératrices avec <em>yield</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="iterateur_generateur.html#les-generateurs-en-comprehension">Les générateurs en compréhension</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="iterateur_generateur.html#les-fonctions-enumerate-map-zip-filter">Les fonctions <em>enumerate</em>, <em>map</em>, <em>zip</em>, <em>filter</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="iterateur_generateur.html#le-module-itertools">Le module <em>itertools</em></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fichier.html">Gestion des fichiers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fichier.html#ouvrir-et-fermer-un-fichier">Ouvrir et fermer un fichier</a></li>
<li class="toctree-l2"><a class="reference internal" href="fichier.html#lire-le-contenu-d-un-fichier">Lire le contenu d’un fichier</a></li>
<li class="toctree-l2"><a class="reference internal" href="fichier.html#les-modes-de-fichier">Les modes de fichier</a><ul>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#specificite-du-mode-texte">Spécificité du mode texte</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="fichier.html#ecrire-dans-un-fichier">Écrire dans un fichier</a></li>
<li class="toctree-l2"><a class="reference internal" href="fichier.html#chemin-de-fichier">Chemin de fichier</a><ul>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#le-module-os-path">Le module <em>os.path</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#le-module-pathlib">Le module <em>pathlib</em></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="fichier.html#actions-sur-les-fichiers-et-les-repertoires">Actions sur les fichiers et les répertoires</a><ul>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#connaitre-le-repertoire-de-travail">Connaître le répertoire de travail</a></li>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#connaitre-le-repertoire-de-l-utilisateur">Connaître le répertoire de l’utilisateur</a></li>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#copier-un-fichier">Copier un fichier</a></li>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#supprimer-un-fichier">Supprimer un fichier</a></li>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#creer-un-repertoire">Créer un répertoire</a></li>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#supprimer-un-repertoire">Supprimer un répertoire</a></li>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#verifier-qu-un-fichier-existe">Vérifier qu’un fichier existe</a></li>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#lister-le-contenu-d-un-repertoire">Lister le contenu d’un répertoire</a></li>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#rechercher-des-fichiers">Rechercher des fichiers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="fichier.html#lecture-de-fichiers-csv">Lecture de fichiers CSV</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="unittest.html">Les tests unitaires automatisés avec unittest</a><ul>
<li class="toctree-l2"><a class="reference internal" href="unittest.html#structure-d-une-classe-de-test">Structure d’une classe de test</a><ul>
<li class="toctree-l3"><a class="reference internal" href="unittest.html#execution-des-tests">Exécution des tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="unittest.html#tester-des-exceptions">Tester des exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="unittest.html#utilisation-de-doublure">Utilisation de doublure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="unittest.html#utilisation-d-un-objet-mock">Utilisation d’un objet <em>mock</em></a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Boomerang Consulting - Python 3</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Accueil</a> &raquo;</li>
        
      <li>Héritage et polymorphisme</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="exception.html" class="btn btn-neutral float-right" title="Les exceptions et la gestion des erreurs" accesskey="n">Suivant <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="objet.html" class="btn btn-neutral" title="La programmation orientée objet" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Précédent</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="heritage-et-polymorphisme">
<h1>Héritage et polymorphisme<a class="headerlink" href="#heritage-et-polymorphisme" title="Lien permanent vers ce titre">¶</a></h1>
<p>Une application Python est composée d’un ensemble d’objets. Un des intérêts de
la programmation orientée objet (POO) réside dans les relations que ces objets
entretiennent les uns avec les autres. Ces relations sont construites par les
développeurs et constituent ce que l’on appelle l’architecture d’une application.
Il existe deux relations fondamentales en POO :</p>
<dl>
<dt>a un(e) (<em>has-a</em>)</dt><dd><p>Cette relation permet de créer une relation de dépendance d’une classe envers
une autre. Une classe a besoin des services d’une autre classe pour réaliser
sa fonction. On parle également de relation de composition pour désigner ce
type de relation.</p>
<p>La relation « a un » implique simplement qu’un objet possède un attribut qui
référence un autre objet. Par exemple, si une programme déclare une classe
<code class="docutils literal notranslate"><span class="pre">Personne</span></code>, cette classe peut avoir une propriété pour stocker l’adresse
sous la forme d’une classe adresse :</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Personne</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nom</span><span class="p">,</span> <span class="n">prenom</span><span class="p">,</span> <span class="n">adresse</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nom</span> <span class="o">=</span> <span class="n">nom</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prenom</span> <span class="o">=</span> <span class="n">prenom</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">adresse</span> <span class="o">=</span> <span class="n">adresse</span>


<span class="k">class</span> <span class="nc">Adresse</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rue</span><span class="p">,</span> <span class="n">code_postal</span><span class="p">,</span> <span class="n">ville</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rue</span> <span class="o">=</span> <span class="n">rue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code_postal</span> <span class="o">=</span> <span class="n">code_postal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ville</span> <span class="o">=</span> <span class="n">ville</span>


<span class="n">adresse</span> <span class="o">=</span> <span class="n">Adresse</span><span class="p">(</span><span class="n">rue</span><span class="o">=</span><span class="s2">&quot;4 rue d&#39;ici&quot;</span><span class="p">,</span> <span class="n">code_postal</span><span class="o">=</span><span class="s2">&quot;78000&quot;</span><span class="p">,</span> <span class="n">ville</span><span class="o">=</span><span class="s2">&quot;Paris&quot;</span><span class="p">)</span>
<span class="n">personne</span> <span class="o">=</span> <span class="n">Personne</span><span class="p">(</span><span class="n">prenom</span><span class="o">=</span><span class="s2">&quot;Jean&quot;</span><span class="p">,</span> <span class="n">nom</span><span class="o">=</span><span class="s2">&quot;Dumond&quot;</span><span class="p">,</span> <span class="n">adresse</span><span class="o">=</span><span class="n">adresse</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Le code ci-dessus illustre la relation de composition et on peut bien dire
qu’une personne <strong>a une</strong> adresse.</p>
</dd>
<dt>est un(e) (<em>is-a</em>)</dt><dd><p>Cette relation permet de créer une chaîne de relation d’identité entre des
classes. Elle indique qu’une classe peut être assimilée à une autre classe
qui correspond à une notion plus abstraite ou plus générale. On parle
<strong>d’héritage</strong> pour désigner le mécanisme qui permet d’implémenter ce type de
relation. Le reste de ce chapitre est consacré à ce type particulier de
relation entre classes.</p>
</dd>
</dl>
<div class="section" id="l-heritage">
<h2>L’héritage<a class="headerlink" href="#l-heritage" title="Lien permanent vers ce titre">¶</a></h2>
<p>L’héritage est donc le mécanisme qui permet de traduire une relation de type
« est un(e) ».</p>
<p>Prenons l’exemple d’une classe <code class="docutils literal notranslate"><span class="pre">Voiture</span></code> et d’une classe <code class="docutils literal notranslate"><span class="pre">Vehicule</span></code>. Il est
possible de dire qu’une voiture <strong>est un</strong> véhicule. Je peux traduire cette
relation en Python. On dit que <code class="docutils literal notranslate"><span class="pre">Vehicule</span></code> est la classe parente de <code class="docutils literal notranslate"><span class="pre">Voiture</span></code>
ou la généralisation. Symétriquement, on dit que <code class="docutils literal notranslate"><span class="pre">Voiture</span></code> est la classe
enfant (ou fille) de <code class="docutils literal notranslate"><span class="pre">Vehicule</span></code> ou la spécialisation. On dit aussi que
la classe <code class="docutils literal notranslate"><span class="pre">Vehicule</span></code> est la <strong>super classe</strong> de <code class="docutils literal notranslate"><span class="pre">Voiture</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vehicule</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">Voiture</span><span class="p">(</span><span class="n">Vehicule</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Cette relation se traduit en précisant le nom de la classe parente entre parenthèses
après le nom de la classe.</p>
<p>Si nous créons un objet à partir de la classe <code class="docutils literal notranslate"><span class="pre">Voiture</span></code>, cet objet est à la
fois de type <code class="docutils literal notranslate"><span class="pre">Vehicule</span></code> et de type <code class="docutils literal notranslate"><span class="pre">Voiture</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Voiture</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Voiture</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Vehicule</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Le mot de héritage vient du fait qu’une classe fille hérite des attributs et
des comportements de sa classe mère.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vehicule</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vitesse</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vitesse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vitesse</span>

    <span class="k">def</span> <span class="nf">accelerer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta_vitesse</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vitesse</span> <span class="o">+=</span> <span class="n">delta_vitesse</span>

    <span class="k">def</span> <span class="nf">decelerer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta_vitesse</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vitesse</span> <span class="o">-=</span> <span class="n">delta_vitesse</span>


<span class="k">class</span> <span class="nc">Voiture</span><span class="p">(</span><span class="n">Vehicule</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Voiture</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">vitesse</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">accelerer</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">vitesse</span>
<span class="go">80</span>
</pre></div>
</div>
<p>Les objets de type <code class="docutils literal notranslate"><span class="pre">Voiture</span></code> disposent des mêmes comportements, propriétés et
attributs déclarés dans la classe <code class="docutils literal notranslate"><span class="pre">Vehicule</span></code>.</p>
<p>La classe fille peut fournir ses propres comportements et ses propres attributs :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Voiture</span><span class="p">(</span><span class="n">Vehicule</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">klaxonner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;tût tût !&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="constructeur-et-heritage">
<h2>Constructeur et héritage<a class="headerlink" href="#constructeur-et-heritage" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le constructeur est, comme toutes les méthodes, hérité. Cependant que
ce passe-t-il si nous souhaitons ajouter une constructeur dans notre classe
<code class="docutils literal notranslate"><span class="pre">Voiture</span></code> ?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Voiture</span><span class="p">(</span><span class="n">Vehicule</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">klaxon</span><span class="o">=</span><span class="s2">&quot;tût tût !&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">klaxon</span> <span class="o">=</span> <span class="n">klaxon</span>

    <span class="k">def</span> <span class="nf">klaxonner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">klaxon</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Voiture</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">klaxonner</span><span class="p">()</span>
<span class="go">tût tût !</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">vitesse</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vitesse</span>
<span class="gr">AttributeError</span>: <span class="n">&#39;Voiture&#39; object has no attribute &#39;_vitesse&#39;</span>
</pre></div>
</div>
<p>Cela ne fonctionne plus car le constructeur déclaré dans la classe <code class="docutils literal notranslate"><span class="pre">Voiture</span></code>
remplace et cache celui hérité de la classe <code class="docutils literal notranslate"><span class="pre">Vehicule</span></code> et l’initialisation
de l’attribut <code class="docutils literal notranslate"><span class="pre">_vitesse</span></code> n’est plus faite. Quand une classe hérite d’une autre
classe, elle a la responsabilité de s’assurer que le constructeur de la classe
parente est appelé pour garantir l’initialisation. Pour cela, Python 3 fournit
la fonction <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#super" title="(disponible dans Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a> qui retourne le type de la super classe. L’implémentation
correcte de la classe <code class="docutils literal notranslate"><span class="pre">Voiture</span></code> doit donc être :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Voiture</span><span class="p">(</span><span class="n">Vehicule</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">klaxon</span><span class="o">=</span><span class="s2">&quot;tût tût !&quot;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">klaxon</span> <span class="o">=</span> <span class="n">klaxon</span>

    <span class="k">def</span> <span class="nf">klaxonner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">klaxon</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Voiture</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">klaxonner</span><span class="p">()</span>
<span class="go">tût tût !</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">vitesse</span>
<span class="go">0</span>
</pre></div>
</div>
<p>Il est donc facile de passer des paramètres à l’initialisation de la classe
parente si cette dernière attend des paramètres de constructeur.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vehicule</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">marque</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">vitesse_initiale</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">marque</span> <span class="o">=</span> <span class="n">marque</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vitesse</span> <span class="o">=</span> <span class="n">vitesse_initiale</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vitesse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vitesse</span>

    <span class="k">def</span> <span class="nf">accelerer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta_vitesse</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vitesse</span> <span class="o">+=</span> <span class="n">delta_vitesse</span>

    <span class="k">def</span> <span class="nf">decelerer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta_vitesse</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vitesse</span> <span class="o">-=</span> <span class="n">delta_vitesse</span>


<span class="k">class</span> <span class="nc">Voiture</span><span class="p">(</span><span class="n">Vehicule</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">marque</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">vitesse_initiale</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">klaxon</span><span class="o">=</span><span class="s2">&quot;tût tût !&quot;</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">marque</span><span class="p">,</span> <span class="n">vitesse_initiale</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">klaxon</span> <span class="o">=</span> <span class="n">klaxon</span>

    <span class="k">def</span> <span class="nf">klaxonner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">klaxon</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Voiture</span><span class="p">(</span><span class="s2">&quot;De Lorean&quot;</span><span class="p">,</span> <span class="mf">88.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">vitesse</span>
<span class="go">88.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span> <span class="n">marque</span>
<span class="go">&#39;De Lorean&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="o">.</span><span class="n">klaxonner</span><span class="p">()</span>
<span class="go">tût tût !</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pour chaîner l’appel des constructeurs, il est également possible d’appeler
directement le constructeur en désignant la classe parente :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Voiture</span><span class="p">(</span><span class="n">Vehicule</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">marque</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">vitesse_initiale</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">klaxon</span><span class="o">=</span><span class="s2">&quot;tût tût !&quot;</span><span class="p">):</span>
        <span class="n">Vehicule</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">marque</span><span class="p">,</span> <span class="n">vitesse_initiale</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">klaxon</span> <span class="o">=</span> <span class="n">klaxon</span>
</pre></div>
</div>
<p>Cette écriture est cependant considérée comme obsolète en Python 3 grâce à
la fonction <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#super" title="(disponible dans Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a>.</p>
</div>
</div>
<div class="section" id="heritage-et-mutualisation-de-code">
<h2>Héritage et mutualisation de code<a class="headerlink" href="#heritage-et-mutualisation-de-code" title="Lien permanent vers ce titre">¶</a></h2>
<p>Un des intérêts de l’héritage est de permettre la réutilisation de code. Maintenant
que nous avons défini une <code class="docutils literal notranslate"><span class="pre">Vehicule</span></code>, nous pouvons imaginer diverses classes
appropriées pour notre système et qui sont des véhicules.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Charette</span><span class="p">(</span><span class="n">Vehicule</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vitesse_initiale</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">vitesse_initiale</span><span class="o">=</span><span class="n">vitesse_initiale</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Charette</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">accelerer</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">vitesse</span>
<span class="go">6</span>
</pre></div>
</div>
</div>
<div class="section" id="la-classe-object">
<h2>La classe <em>object</em><a class="headerlink" href="#la-classe-object" title="Lien permanent vers ce titre">¶</a></h2>
<p>Python définit la classe <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#object" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a>. Toutes les classes hérite directement
ou indirectement de cette classe. Si une classe ne déclare aucune classe parente
alors sa classe parente est <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#object" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MaClasse</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>La déclaration ci-dessus est strictement équivalente à :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MaClasse</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Il est possible de créer des instances de la classe <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#object" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a>. Cela
reste d’un usage limité car cette classe n’offre aucune méthode particulière et
il n’est pas possible d’ajouter dynamiquement des attributs à ses instances.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">o</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o</span><span class="o">.</span><span class="n">nom</span> <span class="o">=</span> <span class="s2">&quot;Un nom&quot;</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">AttributeError</span>: <span class="n">&#39;object&#39; object has no attribute &#39;nom&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="le-polymorphisme">
<h2>Le polymorphisme<a class="headerlink" href="#le-polymorphisme" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le polymorphisme est un mécanisme important dans la programmation objet. Il
permet de modifier le comportement d’une classe fille par rapport à sa classe
mère. Le polymorphisme permet d’utiliser l’héritage comme un mécanisme
d’extension en adaptant le comportement des objets.</p>
<p>Prenons l’exemple de la classe <code class="docutils literal notranslate"><span class="pre">Animal</span></code>. Cette classe offre une méthode
<code class="docutils literal notranslate"><span class="pre">crier</span></code>. Pour simplifier notre exemple, la méthode se contente d’écrire
le cri de l’animal sur la sortie standard.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Animal</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">crier</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;un cri d&#39;animal&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Nous pouvons créer les classes <code class="docutils literal notranslate"><span class="pre">Chien</span></code> et <code class="docutils literal notranslate"><span class="pre">Chat</span></code> qui héritent toutes deux
de la classe <code class="docutils literal notranslate"><span class="pre">Animal</span></code>. Ces classes peuvent être des spécialisations de la
classe <code class="docutils literal notranslate"><span class="pre">Animal</span></code> en ce qu’elles peuvent <strong>redéfinir</strong> (<em>override</em>) le comportement
de la méthode <code class="docutils literal notranslate"><span class="pre">crier</span> <span class="pre">()</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Chien</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">crier</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;whouaf whouaf !&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Chat</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">crier</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;miaou !&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Animal</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">animal</span> <span class="o">=</span> <span class="n">Animal</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">animal</span><span class="o">.</span><span class="n">crier</span><span class="p">()</span>
<span class="go">un cri d&#39;animal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">animal</span> <span class="o">=</span> <span class="n">Chien</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">animal</span><span class="o">.</span><span class="n">crier</span><span class="p">()</span>
<span class="go">whouaf whouaf !</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">animal</span> <span class="o">=</span> <span class="n">Chat</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">animal</span><span class="o">.</span><span class="n">crier</span><span class="p">()</span>
<span class="go">miaou !</span>
</pre></div>
</div>
<p>Un chat est bien un animal, un chien est bien un animal. Les objets de ces types
disposent bien de la méthode <code class="docutils literal notranslate"><span class="pre">crier()</span></code> mais son comportement est polymorphe.
Il dépend du type réel de l’objet.</p>
<p>À noter qu’il est toujours possible d’appeler la méthode parente dans la classe
enfant grâce à la fonction <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#super" title="(disponible dans Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Chien</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">crier</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;whouaf whouaf !&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">crier_comme_un_animal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">crier</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">chien</span> <span class="o">=</span> <span class="n">Chien</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chien</span><span class="o">.</span><span class="n">crier</span><span class="p">()</span>
<span class="go">whouaf whouaf !</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chien</span><span class="o">.</span><span class="n">crier_comme_un_animal</span><span class="p">()</span>
<span class="go">un cri d&#39;animal</span>
</pre></div>
</div>
</div>
<div class="section" id="polymorphisme-et-duck-typing">
<h2>Polymorphisme et <em>duck typing</em><a class="headerlink" href="#polymorphisme-et-duck-typing" title="Lien permanent vers ce titre">¶</a></h2>
<p>Pour les langages de programmation à typage fort comme le C++ ou le Java, le
polymorphisme a des implications très fortes et il permet d’introduire une
grande souplesse dans les relations entre types. Pour les langages de programmation
à typage dynamique comme Python, le polymorphisme, même s’il reste une notion
importante, à moins d’impact.</p>
<p>En Python, on préfère souvent le principe du <a class="reference external" href="https://fr.wikipedia.org/wiki/Duck_typing">duck typing</a> (ou typage canard).
Cette approche repose sur le principe suivant :</p>
<blockquote>
<div><div class="line-block">
<div class="line">« Si je vois un oiseau qui vole comme un canard, cancane comme un canard, et</div>
<div class="line">nage comme un canard, alors j’appelle cet oiseau un canard. »</div>
</div>
</div></blockquote>
<p>Cela signifie que le type réel est moins important que le comportement attendu.
Pour reprendre notre exemple des véhicules : si une classe offre des méthodes
pour accélérer, décélérer et des propriétés pour la vitesse et la marque, alors
c’est qu’il s’agit d’un véhicule et peut importe que cette classe hérite ou
non de la classe <code class="docutils literal notranslate"><span class="pre">Vehicule</span></code>. Tous les objets de cette classe pourront être
utilisés dans un contexte qui manipule des véhicules.</p>
</div>
<div class="section" id="masquer-les-attributs-et-les-methodes-pour-les-classe-filles">
<h2>Masquer les attributs et les méthodes pour les classe filles<a class="headerlink" href="#masquer-les-attributs-et-les-methodes-pour-les-classe-filles" title="Lien permanent vers ce titre">¶</a></h2>
<p>Parfois, on ne souhaite pas qu’une méthode puisse être redéfinie ou qu’un
attribut puisse être modifié dans une classe fille. Pour cela, il suffit que
le nom de la méthode ou de l’attribut commence par deux caractères soulignés
(<em>underscores</em>). Nous avons vu précédemment que Python n’a pas de mécanisme
pour contrôler la visibilité des éléments d’une classe. Par convention, les
développeurs signalent par un caractère souligné (<em>underscore</em>) le statut
privé d’un attribut ou d’une méthode. Par contre le recours à deux caractères
soulignés à un impact sur l’interpréteur. Ce dernier renomme la méthode ou
l’attribut de la forme :</p>
<blockquote>
<div><p>_&lt;nom de la classe&gt;__&lt;nom&gt;</p>
</div></blockquote>
<p>Ainsi si nous modifions le nom de la la classe <code class="docutils literal notranslate"><span class="pre">Vehicule</span></code> :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vehicule</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">marque</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">vitesse_initiale</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">marque</span> <span class="o">=</span> <span class="n">marque</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__vitesse</span> <span class="o">=</span> <span class="n">vitesse_initiale</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vitesse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vitesse</span>

    <span class="k">def</span> <span class="nf">accelerer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta_vitesse</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__vitesse</span> <span class="o">+=</span> <span class="n">delta_vitesse</span>

    <span class="k">def</span> <span class="nf">decelerer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta_vitesse</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__vitesse</span> <span class="o">-=</span> <span class="n">delta_vitesse</span>
</pre></div>
</div>
<p>L’attribut <code class="docutils literal notranslate"><span class="pre">__vitesse</span></code> sera renommé <code class="docutils literal notranslate"><span class="pre">_Vehicule__vitesse</span></code>. Donc, si un attribut
<code class="docutils literal notranslate"><span class="pre">__vitesse</span></code> est également utilisé dans une classe fille, l’interpréteur
considérera qu’il s’agit d’un attribut différent.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Cette notation est avant tout faite pour éviter des effets de bord involontaire
lorsqu’on hérite d’une classe dont on ne connaît pas bien le code source.
Après tout, il est toujours possible d’implémenter une classe fille qui utilise
un attribut ou déclare une méthode sans que le développeur ait conscience
qu’il réutilise un attribut ou qu’il redéfinit une méthode d’une classe
parente.</p>
</div>
</div>
<div class="section" id="heritage-multiple-et-mixin">
<h2>Héritage multiple et <em>mixin</em><a class="headerlink" href="#heritage-multiple-et-mixin" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une classe peut hériter de plusieurs classes. Dans ce cas, elle héritera des
méthodes et des attributs de l’ensemble de ces classes et de leurs classes parentes.
Il suffit d’indiquer la liste des classes parentes en les séparant par une virgule.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Animal</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">crier</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">Carnivore</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">chasser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">Chien</span><span class="p">(</span><span class="n">Animal</span><span class="p">,</span> <span class="n">Carnivore</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Un chien qui est à la fois un animal et un carnivore&quot;&quot;&quot;</span>
</pre></div>
</td></tr></table></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Chien</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">chasser</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">crier</span><span class="p">()</span>
</pre></div>
</div>
<p>La classe <code class="docutils literal notranslate"><span class="pre">Chien</span></code> hérite des comportements mais aussi des attributs des classes
parentes. La variable <code class="docutils literal notranslate"><span class="pre">c</span></code> désigne un objet qui est à la fois un <code class="docutils literal notranslate"><span class="pre">Chien</span></code>, un
<code class="docutils literal notranslate"><span class="pre">Animal</span></code> et un <code class="docutils literal notranslate"><span class="pre">Carnivore</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Chien</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Animal</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Carnivore</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="section" id="l-heritage-en-diamant">
<h3>L’héritage en diamant<a class="headerlink" href="#l-heritage-en-diamant" title="Lien permanent vers ce titre">¶</a></h3>
<p>Il peut arriver qu’une classe hérite indirectement plusieurs fois de la même
classe. Reprenons notre exemple précédent et supposons que les classes <code class="docutils literal notranslate"><span class="pre">Animal</span></code>
et <code class="docutils literal notranslate"><span class="pre">Carnivore</span></code> héritent toutes deux de la classe <code class="docutils literal notranslate"><span class="pre">EtreVivant</span></code> et que la
classe <code class="docutils literal notranslate"><span class="pre">EtreVivant</span></code> possède l’attribut <code class="docutils literal notranslate"><span class="pre">point_de_vie</span></code>.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">EtreVivant</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">=</span> <span class="mi">100</span>

<span class="k">class</span> <span class="nc">Animal</span><span class="p">(</span><span class="n">EtreVivant</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">dormir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="k">class</span> <span class="nc">Carnivore</span><span class="p">(</span><span class="n">EtreVivant</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">chasser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">-=</span> <span class="mi">1</span>


<span class="k">class</span> <span class="nc">Chien</span><span class="p">(</span><span class="n">Animal</span><span class="p">,</span> <span class="n">Carnivore</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Un chien qui est à la fois un animal et un carnivore&quot;&quot;&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Dans ce cas, la classe <code class="docutils literal notranslate"><span class="pre">Chien</span></code> hérite deux fois de la classe <code class="docutils literal notranslate"><span class="pre">EtreVivant</span></code>.
À cause de la représentation graphique d’une telle situation, on appelle
ce cas particulier <strong>l’héritage en diamant</strong>.</p>
<p>Python résout cette situation en considérant qu’une classe ne peut pas directement
ou indirectement hériter plusieurs fois d’une même classe. Donc, les instances
de la classe <code class="docutils literal notranslate"><span class="pre">Chien</span></code> ne posséderont qu’un seul attribut <code class="docutils literal notranslate"><span class="pre">point_de_vie</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Chien</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">chasser</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">point_de_vie</span>
<span class="go">99</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">dormir</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">point_de_vie</span>
<span class="go">100</span>
</pre></div>
</div>
<p>Mais que se passe-t-il si l’héritage en diamant implique des méthodes ? Par exemple,
imaginons que la classe <code class="docutils literal notranslate"><span class="pre">EtreVivant</span></code> possède la méthode <code class="docutils literal notranslate"><span class="pre">se_nourrir()</span></code> qui
est redéfinie à la fois dans la classe <code class="docutils literal notranslate"><span class="pre">Animal</span></code> et dans la classe <code class="docutils literal notranslate"><span class="pre">Carnivore</span></code>.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">EtreVivant</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">=</span> <span class="mi">100</span>

    <span class="k">def</span> <span class="nf">se_nourrir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">+=</span> <span class="mi">1</span>


<span class="k">class</span> <span class="nc">Animal</span><span class="p">(</span><span class="n">EtreVivant</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">dormir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">se_nourrir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">+=</span> <span class="mi">5</span>


<span class="k">class</span> <span class="nc">Carnivore</span><span class="p">(</span><span class="n">EtreVivant</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">chasser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">se_nourrir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">+=</span> <span class="mi">10</span>


<span class="k">class</span> <span class="nc">Chien</span><span class="p">(</span><span class="n">Animal</span><span class="p">,</span> <span class="n">Carnivore</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Un chien qui est à la fois un animal et un carnivore&quot;&quot;&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Que se passe-t-il si nous appelons la méthode <code class="docutils literal notranslate"><span class="pre">se_nourrir()</span></code> depuis une instance
de <code class="docutils literal notranslate"><span class="pre">Chien</span></code> ?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Chien</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">se_nourrir</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">point_de_vie</span>
<span class="go">105</span>
</pre></div>
</div>
<p>C’est la méthode de la classe <code class="docutils literal notranslate"><span class="pre">Animal</span></code> qui est exécutée, passant la valeur
de <code class="docutils literal notranslate"><span class="pre">point_de_vie</span></code> à 105. Pour choisir quelle méthode est appelée, l’interpréteur
se base sur un algorithme appelé <strong>method resolution order</strong> ou <strong>mro</strong>. Il
s’agit de chercher dans la liste de l’héritage des classes la première déclaration
de la méthode appelée. On peut facilement connaître le <em>mro</em> d’une classe car
il existe la méthode <a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#class.mro" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">class.mro()</span></code></a> qui retourne précisément cette liste.
Pour accéder à la classe d’une instance, on peut utiliser la fonction <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#type" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">.</span><span class="n">mro</span><span class="p">()</span>
<span class="go">[&lt;class &#39;__main__.Chien&#39;&gt;, &lt;class &#39;__main__.Animal&#39;&gt;,</span>
<span class="go"> &lt;class &#39;__main__.Carnivore&#39;&gt;, &lt;class &#39;__main__.EtreVivant&#39;&gt;,</span>
<span class="go"> &lt;class &#39;object&#39;&gt;]</span>
</pre></div>
</div>
<p>On voit que pour le type <code class="docutils literal notranslate"><span class="pre">Chien</span></code>, un appel à une méthode conduit à chercher
cette méthode d’abord dans la classe <code class="docutils literal notranslate"><span class="pre">Chien</span></code> et ensuite dans les classes <code class="docutils literal notranslate"><span class="pre">Animal</span></code>
<code class="docutils literal notranslate"><span class="pre">Carnivore</span></code>, <code class="docutils literal notranslate"><span class="pre">EtreVivant</span></code> et enfin <code class="docutils literal notranslate"><span class="pre">object</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Rappelez-vous qu’une classe qui ne précise explicitement aucune classe parente
hérite tout de même de la classe <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#object" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a>.</p>
</div>
<p>Si nous intervertissons l’ordre d’héritage de la déclaration de la classe
<code class="docutils literal notranslate"><span class="pre">Chien</span></code>.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">EtreVivant</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">=</span> <span class="mi">100</span>

    <span class="k">def</span> <span class="nf">se_nourrir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">+=</span> <span class="mi">1</span>


<span class="k">class</span> <span class="nc">Animal</span><span class="p">(</span><span class="n">EtreVivant</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">dormir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">se_nourrir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">+=</span> <span class="mi">5</span>


<span class="k">class</span> <span class="nc">Carnivore</span><span class="p">(</span><span class="n">EtreVivant</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">chasser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">se_nourrir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">+=</span> <span class="mi">10</span>


<span class="k">class</span> <span class="nc">Chien</span><span class="p">(</span><span class="n">Carnivore</span><span class="p">,</span> <span class="n">Animal</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Un chien qui est à la fois un animal et un carnivore&quot;&quot;&quot;</span>
</pre></div>
</td></tr></table></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Chien</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">se_nourrir</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">point_de_vie</span>
<span class="go">110</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">.</span><span class="n">mro</span><span class="p">()</span>
<span class="go">[&lt;class &#39;__main__.Chien&#39;&gt;, &lt;class &#39;__main__.Carnivore&#39;&gt;,</span>
<span class="go"> &lt;class &#39;__main__.Animal&#39;&gt;, &lt;class &#39;__main__.EtreVivant&#39;&gt;,</span>
<span class="go"> &lt;class &#39;object&#39;&gt;]</span>
</pre></div>
</div>
<p>Maintenant, c’est la méthode <code class="docutils literal notranslate"><span class="pre">se_nourrir()</span></code> de la classe <code class="docutils literal notranslate"><span class="pre">Carnivore</span></code>
qui est appelée pour un objet de type <code class="docutils literal notranslate"><span class="pre">Chien</span></code>.
L’ordre de déclaration de l’héritage multiple est donc primordial !</p>
</div>
<div class="section" id="appel-des-constructeurs">
<h3>Appel des constructeurs<a class="headerlink" href="#appel-des-constructeurs" title="Lien permanent vers ce titre">¶</a></h3>
<p>Si nous voulons déclarer des constructeurs, il faut impérativement <strong>appeler
le constructeur de la super classe</strong>.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">EtreVivant</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point_de_vie</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">=</span> <span class="n">point_de_vie</span>

    <span class="k">def</span> <span class="nf">se_nourrir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">+=</span> <span class="mi">1</span>


<span class="k">class</span> <span class="nc">Animal</span><span class="p">(</span><span class="n">EtreVivant</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nom</span><span class="p">,</span> <span class="n">point_de_vie</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">point_de_vie</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nom</span> <span class="o">=</span> <span class="n">nom</span>

    <span class="k">def</span> <span class="nf">dormir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">se_nourrir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">+=</span> <span class="mi">5</span>


<span class="k">class</span> <span class="nc">Carnivore</span><span class="p">(</span><span class="n">EtreVivant</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">chasser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">se_nourrir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point_de_vie</span> <span class="o">+=</span> <span class="mi">10</span>


<span class="k">class</span> <span class="nc">Chien</span><span class="p">(</span><span class="n">Carnivore</span><span class="p">,</span> <span class="n">Animal</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Un chien qui est à la fois un animal et un carnivore&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point_de_vie</span><span class="p">,</span> <span class="n">nom</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">point_de_vie</span><span class="p">,</span> <span class="n">nom</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Chien</span><span class="p">(</span><span class="s2">&quot;Médor&quot;</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">nom</span>
<span class="go">&#39;Médor&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">point_de_vie</span>
<span class="go">60</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">se_nourrir</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">point_de_vie</span>
<span class="go">70</span>
</pre></div>
</div>
<p>La fonction <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#super" title="(disponible dans Python v3.6)"><code class="xref any docutils literal notranslate"><span class="pre">super()</span></code></a> retourne le type suivant dans la liste du
<em>mro</em>. La classe <code class="docutils literal notranslate"><span class="pre">Carnivore</span></code> ne proposant pas de constructeur, elle se contente
de passer l’appel au constructeur de la classe <code class="docutils literal notranslate"><span class="pre">Animal</span></code> qui est la classe
suivante dans la liste <em>mro</em>.</p>
</div>
<div class="section" id="les-mixins">
<h3>Les mixins<a class="headerlink" href="#les-mixins" title="Lien permanent vers ce titre">¶</a></h3>
<p>Un <em>mixin</em> est une classe qui permet d’ajouter des fonctionnalités
supplémentaires. Il s’agit simplement d’une classe comme une autre mais qui
n’est pas destinée à être utilisée directement pour créer des instances.</p>
<p>Imaginons que nous désirions ajouter à certaines de nos classes la possibilité
d’afficher leur état (la valeur des attributs) grâce à une méthode <code class="docutils literal notranslate"><span class="pre">afficher()</span></code>.
Nous pouvons créer un <em>mixin</em> proposant cette méthode. Ce <em>mixin</em> accepte
en paramètre le caractère à utiliser comme séparateur ainsi que l’indentation
à utiliser lors de l’affichage.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Affichable</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">indentation</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">separateur</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__indentation</span> <span class="o">=</span> <span class="n">indentation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__separateur</span> <span class="o">=</span> <span class="n">separateur</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">afficher</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">separateur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__separateur</span> <span class="o">*</span> <span class="mi">80</span>
        <span class="k">print</span><span class="p">(</span><span class="n">separateur</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Objet de la classe&quot;</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;mro : &quot;</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">mro</span><span class="p">())</span>
        <span class="k">print</span><span class="p">()</span>
        <span class="n">indentation</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__indentation</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">):</span>
                <span class="n">valeur</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
                <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;{indentation}{attr} = {valeur}&quot;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">separateur</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Nous pouvons modifier notre implémentation de la classe <code class="docutils literal notranslate"><span class="pre">Chien</span></code> pour la rendre
affichable :</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Chien</span><span class="p">(</span><span class="n">Affichable</span><span class="p">,</span> <span class="n">Animal</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Un chien qui est à la fois un animal et un carnivore&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point_de_vie</span><span class="p">,</span> <span class="n">nom</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">point_de_vie</span><span class="p">,</span> <span class="n">nom</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Ainsi nous pouvons afficher l’état interne d’un objet de type <code class="docutils literal notranslate"><span class="pre">Chien</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Chien</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="s2">&quot;Médor&quot;</span><span class="p">,</span> <span class="n">indentation</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">afficher</span><span class="p">()</span>
<span class="go">--------------------------------------------------------------------------------</span>
<span class="go">Objet de la classe Chien</span>
<span class="go">Un chien qui est à la fois un animal et un carnivore</span>
<span class="go">mro :  [&lt;class &#39;__main__.Chien&#39;&gt;, &lt;class &#39;__main__.Affichable&#39;&gt;,</span>
<span class="go">&lt;class &#39;__main__.Animal&#39;&gt;, &lt;class &#39;__main__.EtreVivant&#39;&gt;, &lt;class &#39;object&#39;&gt;]</span>

<span class="go">    point_de_vie = Médor</span>
<span class="go">    nom = 40</span>
<span class="go">--------------------------------------------------------------------------------</span>
</pre></div>
</div>
<p>Il y a plusieurs points importants à remarquer dans l’implémentation ci-dessus :</p>
<ol class="arabic">
<li><p>La classe <code class="docutils literal notranslate"><span class="pre">Chien</span></code> hérite en premier du <em>mixin</em> <code class="docutils literal notranslate"><span class="pre">Affichable</span></code>. À cause de
ce que nous avons vu à propos du <em>mro</em>, un <em>mixin</em> devrait toujours être déclaré
avant la classe parente.</p></li>
<li><p>La classe <code class="docutils literal notranslate"><span class="pre">Chien</span></code> accepte comme dernier paramètre de constructeur le paramètre
de compactage <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>. La classe <code class="docutils literal notranslate"><span class="pre">Chien</span></code> peut ainsi accepter les paramètres
nommés <code class="docutils literal notranslate"><span class="pre">identation</span></code> et <code class="docutils literal notranslate"><span class="pre">separateur</span></code> sans avoir besoin de les répéter.</p></li>
<li><p>La classe <code class="docutils literal notranslate"><span class="pre">Affichage</span></code> a un constructeur assez compliqué.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">indentation</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">separateur</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__indentation</span> <span class="o">=</span> <span class="n">indentation</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__separateur</span> <span class="o">=</span> <span class="n">separateur</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>Les paramètres <code class="docutils literal notranslate"><span class="pre">indentation</span></code> et <code class="docutils literal notranslate"><span class="pre">separateur</span></code> sont placés après l’opérateur
de compactage <code class="docutils literal notranslate"><span class="pre">*args</span></code> ce qui implique qu’il s’agit de paramètres nommés.
Le constructeur utilise à la fin la fonction <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#super" title="(disponible dans Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a> pour appeler
le constructeur suivant en lui passant tous les paramètres que le <em>mixin</em>
ne reconnaît pas. On voit qu’il est tout à fait possible de concevoir un <em>mixin</em>
qui accepte des paramètres de constructeur tout en s’intégrant élégamment
à un héritage existant… au prix d’une petite complexité dans la déclaration
du constructeur.</p>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Les <em>mixins</em> sont une façon de construire de nouvelles classes par agrégat
de fonctionnalités. Attention cependant car en programmation orienté objet,
il est recommandé de définir ses classes de manière à ce qu’elles aient une
responsabilité unique et clairement identifiable dans le système. Cela
permet de limiter la complexité des classes et donc de faciliter leur
compréhension. L’abus du recours au <em>mixin</em> risque de créer des classes
tout-en-un difficile à comprendre et à maintenir.</p>
</div>
</div>
</div>
<div class="section" id="la-meta-classe">
<h2>La méta-classe<a class="headerlink" href="#la-meta-classe" title="Lien permanent vers ce titre">¶</a></h2>
<p>La méta-classe est un concept avancé en Python qui n’est que très très rarement
utilisé directement par les développeurs.</p>
<p>En Python, les classes sont elles-mêmes des objets qui héritent de <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#type" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code></a>.
Il est possible de spécifier le type dont doit hériter l’objet qui représente
la classe. On parle alors de <strong>méta-classe</strong>.</p>
<p>Une méta-classe est une classe qui décrit une classe. Cela signifie que tous
les attributs et toutes les méthodes d’une méta-classe seront les attributs
et les méthodes de la classe.</p>
<p>L’usage de la <strong>méta-classe</strong> permet de réaliser des implémentations qui ne sont pas
possibles avec une simple classe. Par exemple, il n’est pas possible en Python
de déclarer une propriété de classe avec le décorateur <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#property" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">&#64;property</span></code></a>.
Mais cela devient possible par le truchement d’une méta-classe.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MetaclasseCompteur</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Une méta-classe pour aider à compter les instances créées.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_nb_instances</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nb_instances</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_nb_instances</span>

    <span class="k">def</span> <span class="nf">plus_une_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_nb_instances</span> <span class="o">+=</span> <span class="mi">1</span>


<span class="k">class</span> <span class="nc">MaClasse</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">MetaclasseCompteur</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">MaClasse</span><span class="o">.</span><span class="n">plus_une_instance</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>Une méta-classe doit hériter directement ou indirectement de <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#type" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code></a>. À la
ligne 16, on déclare la méta-classe de la classe <code class="docutils literal notranslate"><span class="pre">MaClasse</span></code>. Cette méta-classe
va fournir la propriété de classe <code class="docutils literal notranslate"><span class="pre">nb_instances</span></code> ainsi que la méthode de classe
<code class="docutils literal notranslate"><span class="pre">plus_une_instance()</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">MaClasse</span><span class="o">.</span><span class="n">nb_instances</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m1</span> <span class="o">=</span> <span class="n">MaClasse</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m2</span> <span class="o">=</span> <span class="n">MaClasse</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m3</span> <span class="o">=</span> <span class="n">MaClasse</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MaClasse</span><span class="o">.</span><span class="n">nb_instances</span>
<span class="go">3</span>
</pre></div>
</div>
</div>
<div class="section" id="classes-et-methodes-abstraites">
<h2>Classes et méthodes abstraites<a class="headerlink" href="#classes-et-methodes-abstraites" title="Lien permanent vers ce titre">¶</a></h2>
<p>Comme Python est un langage à typage dynamique, nous avons déjà dit plus haut
que la plupart des développeurs favorisent le <a class="reference external" href="https://fr.wikipedia.org/wiki/Duck_typing">duck typing</a> : le type réel
d’un objet importe moins que le fait qu’il produise les comportements attendus
(c’est-à-dire les méthodes et les propriétés attendues).
Cette approche amène indéniablement plus de souplesse dans la conception des
applications mais cela favorise également une moins grande robustesse.</p>
<p>Les langages de programmation à typage fort comme C++, Java ou C# introduisent
tous le principe de classes abstraites et/ou d’interfaces. Ce type d’approche
insiste sur le fait de pouvoir définir un type particulier contenant un certain
nombre de méthodes mais pour lesquelles on ne fournit aucune implémentation.
Ces classes abstraites et ces interfaces sont ensuite héritées ou implémentées
par d’autres classes qui doivent fournir les implémentations des méthodes attendues.
Cela permet de garantir qu’un objet aura bien les comportements attendus,
c’est-à-dire implémentera les méthodes attendues. On parle parfois de programmation
par contrat, dans le sens où ces classes abstraites et ces interfaces sont
comme des contrats qui lient les objets qui les implémentent et les objets
qui appellent ces méthodes.</p>
<p>En Python, le module <a class="reference external" href="https://docs.python.org/3.6/library/abc.html#module-abc" title="(disponible dans Python v3.6)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">abc</span></code></a> permet de simuler ce type d’approche.
Le nom de ce module est la contraction de <em>abstract base classes</em>. Ce module
fournit une méta-classe appelée <a class="reference external" href="https://docs.python.org/3.6/library/abc.html#abc.ABCMeta" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABCMeta</span></code></a> qui permet
de transformer une classe Python en classe abstraite. Ce module fournit également
le décorateur <a class="reference external" href="https://docs.python.org/3.6/library/abc.html#abc.abstractmethod" title="(disponible dans Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">&#64;abstractmethod</span></code></a> qui permet de déclarer
comme abstraite une méthode, une méthode statique, une méthode de classe ou une
propriété. Cela signifie qu’il n’est pas possible de créer une instance
d’une classe qui hérite d’une classe abstraite tant que toutes les méthodes
abstraites ne sont pas implémentées.</p>
<p>Si nous reprenons notre exemple de la classe <code class="docutils literal notranslate"><span class="pre">Animal</span></code>. Cette classe déclare
une méthode <code class="docutils literal notranslate"><span class="pre">crier()</span></code> pour laquelle il n’est pas vraiment possible de fournir
une implémentation correcte pour un animal. On peut donc
considérer que la classe <code class="docutils literal notranslate"><span class="pre">Animal</span></code> est abstraite en déclarant que sa
méta-classe est <a class="reference external" href="https://docs.python.org/3.6/library/abc.html#abc.ABCMeta" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABCMeta</span></code></a> et déclarer la méthode <code class="docutils literal notranslate"><span class="pre">crier()</span></code>
comme une méthode abstraite.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABCMeta</span><span class="p">,</span> <span class="n">abstractmethod</span>


<span class="k">class</span> <span class="nc">Animal</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">ABCMeta</span><span class="p">):</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">crier</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>Toute tentative de créer un objet de type <code class="docutils literal notranslate"><span class="pre">Animal</span></code> échouera à l’exécution :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Animal</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">Can&#39;t instantiate abstract class Animal with abstract methods crier</span>
</pre></div>
</div>
<p>La classe <code class="docutils literal notranslate"><span class="pre">Animal</span></code> est en quelque sorte devenu un contrat qui indique que toute
classe qui en hérite doit fournir une implémentation pour la méthode <code class="docutils literal notranslate"><span class="pre">crier()</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Chien</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">crier</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;whouaf whouaf !&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Chien</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">crier</span><span class="p">()</span>
<span class="go">whouaf whouaf !</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="exception.html" class="btn btn-neutral float-right" title="Les exceptions et la gestion des erreurs" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="objet.html" class="btn btn-neutral float-left" title="La programmation orientée objet" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Précédent</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright David Gayerie - support@boomerang-consulting.com - CC-BY-SA

    </p>
  </div>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>