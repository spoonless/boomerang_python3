

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="fr" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="fr" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="David Gayerie" name="author" />
<meta content="Python 3 - Les fondamentaux du langage" name="description" />
<meta content="Python, programmation objet, POO, langage de programmation" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Les méthodes spéciales (dunders) &mdash; Documentation Boomerang Consulting - Python 3 </title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom_rtd_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Itérateurs et Générateurs" href="iterateur_generateur.html" />
    <link rel="prev" title="Les exceptions et la gestion des erreurs" href="exception.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Boomerang Consulting - Python 3
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Recherche dans les pages" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Python 3</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#python-2-et-python-3">Python 2 et Python 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#licence-logiciel">Licence logiciel</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#les-principales-caracteristiques-du-langage">Les principales caractéristiques du langage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#oriente-objet">Orienté objet</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#courbe-d-apprentissage-lineaire">Courbe d’apprentissage linéaire</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#compile-et-interprete">Compilé et interprété</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#typage-dynamique">Typage dynamique</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#les-domaines-d-application">Les domaines d’application</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#les-differentes-implementations-de-python">Les différentes implémentations de Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#communaute-et-organisation">Communauté et organisation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="execution.html">Console et exécution de fichiers source</a><ul>
<li class="toctree-l2"><a class="reference internal" href="execution.html#la-console">La console</a></li>
<li class="toctree-l2"><a class="reference internal" href="execution.html#les-fichiers-sources">Les fichiers sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="execution.html#lancement-en-mode-interactif">Lancement en mode interactif</a></li>
<li class="toctree-l2"><a class="reference internal" href="execution.html#lancement-d-un-programme-hors-de-la-console">Lancement d’un programme hors de la console</a></li>
<li class="toctree-l2"><a class="reference internal" href="execution.html#notion-de-bloc-et-d-indentation">Notion de bloc et d’indentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="execution.html#les-commentaires">Les commentaires</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="type_et_variable.html">Types et variables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="type_et_variable.html#nombres-et-calcul-arithmetique">Nombres et calcul arithmétique</a></li>
<li class="toctree-l2"><a class="reference internal" href="type_et_variable.html#les-variables">Les variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="type_et_variable.html#la-chaine-de-caracteres">La chaîne de caractères</a><ul>
<li class="toctree-l3"><a class="reference internal" href="type_et_variable.html#formatage-de-chaine-de-caracteres">Formatage de chaîne de caractères</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="type_et_variable.html#le-type-booleen">Le type booléen</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fonction.html">Les fonctions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#appeler-une-fonction">Appeler une fonction</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#les-fonctions-utiles-dans-la-console-python">Les fonctions utiles dans la console Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#les-fonctions-de-conversion-de-type">Les fonctions de conversion de type</a><ul>
<li class="toctree-l3"><a class="reference internal" href="fonction.html#convertir-en-nombre">Convertir en nombre</a></li>
<li class="toctree-l3"><a class="reference internal" href="fonction.html#convertir-en-valeur-booleenne">Convertir en valeur booléenne</a></li>
<li class="toctree-l3"><a class="reference internal" href="fonction.html#convertir-en-chaine-de-caracteres">Convertir en chaîne de caractères</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#exercices">Exercices</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#declarer-une-fonction">Déclarer une fonction</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#documenter-une-fonction">Documenter une fonction</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#les-valeurs-de-retour">Les valeurs de retour</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#les-parametres-nommes">Les paramètres nommés</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#valeur-par-defaut-des-parametres">Valeur par défaut des paramètres</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#fonction-et-portee-des-variables">Fonction et portée des variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#id1">Exercices</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#variable-globale-et-fonction">Variable globale et fonction</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction.html#notion-de-methode">Notion de méthode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="list.html">La liste (<em>list</em>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="list.html#creer-une-liste">Créer une liste</a></li>
<li class="toctree-l2"><a class="reference internal" href="list.html#acceder-aux-elements">Accéder aux éléments</a></li>
<li class="toctree-l2"><a class="reference internal" href="list.html#les-operations-sur-les-listes">Les opérations sur les listes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="list.html#connaitre-la-taille-d-une-liste">Connaître la taille d’une liste</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html#supprimer-un-element-d-une-liste">Supprimer un élément d’une liste</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html#ajouter-deux-listes-ensemble">Ajouter deux listes ensemble</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html#creer-une-liste-etendue">Créer une liste étendue</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html#savoir-si-un-element-est-present-dans-une-liste">Savoir si un élément est présent dans une liste</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html#comparer-deux-listes">Comparer deux listes</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html#connaitre-le-plus-grand-element-d-une-liste">Connaître le plus grand élément d’une liste</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html#connaitre-le-plus-petit-element-d-une-liste">Connaître le plus petit élément d’une liste</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html#decouper-une-liste">Découper une liste</a></li>
<li class="toctree-l3"><a class="reference internal" href="list.html#copier-une-liste">Copier une liste</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="list.html#quelques-methodes-pour-les-listes">Quelques méthodes pour les listes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tuple.html">Le n-uplet (<em>tuple</em>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tuple.html#creer-un-tuple">Créer un tuple</a></li>
<li class="toctree-l2"><a class="reference internal" href="tuple.html#acceder-aux-elements">Accéder aux éléments</a></li>
<li class="toctree-l2"><a class="reference internal" href="tuple.html#les-operations-sur-les-tuples">Les opérations sur les tuples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tuple.html#connaitre-la-taille-d-un-tuple">Connaître la taille d’un tuple</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuple.html#ajouter-deux-tuples-ensemble">Ajouter deux tuples ensemble</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuple.html#creer-un-tuple-etendu">Créer un tuple étendu</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuple.html#savoir-si-un-element-est-present-dans-un-tuple">Savoir si un élément est présent dans un tuple</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuple.html#comparer-deux-tuples">Comparer deux tuples</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuple.html#connaitre-le-plus-grand-element-d-un-tuple">Connaître le plus grand élément d’un tuple</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuple.html#connaitre-le-plus-petit-element-d-une-tuple">Connaître le plus petit élément d’une tuple</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuple.html#decouper-un-tuple">Découper un tuple</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuple.html#compter-les-occurrences-dans-un-tuple">Compter les occurrences dans un tuple</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tuple.html#listes-et-tuples">Listes et tuples</a></li>
<li class="toctree-l2"><a class="reference internal" href="tuple.html#les-chaines-de-caracteres-comme-tuple">Les chaînes de caractères comme tuple</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="set.html">L’ensemble (<em>set</em>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="set.html#creer-un-ensemble">Créer un ensemble</a></li>
<li class="toctree-l2"><a class="reference internal" href="set.html#acceder-aux-elements">Accéder aux éléments</a></li>
<li class="toctree-l2"><a class="reference internal" href="set.html#les-operations-sur-les-ensembles">Les opérations sur les ensembles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="set.html#connaitre-la-taille-d-un-ensemble">Connaître la taille d’un ensemble</a></li>
<li class="toctree-l3"><a class="reference internal" href="set.html#savoir-si-un-element-est-present-dans-un-ensemble">Savoir si un élément est présent dans un ensemble</a></li>
<li class="toctree-l3"><a class="reference internal" href="set.html#comparer-deux-ensembles">Comparer deux ensembles</a></li>
<li class="toctree-l3"><a class="reference internal" href="set.html#connaitre-le-plus-grand-element-d-un-ensemble">Connaître le plus grand élément d’un ensemble</a></li>
<li class="toctree-l3"><a class="reference internal" href="set.html#connaitre-le-plus-petit-element-d-un-ensemble">Connaître le plus petit élément d’un ensemble</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="set.html#quelques-methodes-pour-les-ensembles">Quelques méthodes pour les ensembles</a></li>
<li class="toctree-l2"><a class="reference internal" href="set.html#ensemble-liste-et-tuple">Ensemble, liste et tuple</a></li>
<li class="toctree-l2"><a class="reference internal" href="set.html#ensemble-fige">Ensemble figé</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dict.html">Le dictionnaire</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dict.html#creer-un-dictionnaire">Créer un dictionnaire</a></li>
<li class="toctree-l2"><a class="reference internal" href="dict.html#acceder-aux-elements">Accéder aux éléments</a></li>
<li class="toctree-l2"><a class="reference internal" href="dict.html#les-operations-sur-les-dictionnaires">Les opérations sur les dictionnaires</a><ul>
<li class="toctree-l3"><a class="reference internal" href="dict.html#connaitre-la-taille-d-un-dictionnaire">Connaître la taille d’un dictionnaire</a></li>
<li class="toctree-l3"><a class="reference internal" href="dict.html#supprimer-une-cle-d-un-dictionnaire">Supprimer une clé d’un dictionnaire</a></li>
<li class="toctree-l3"><a class="reference internal" href="dict.html#savoir-si-une-cle-est-presente-dans-un-dictionnaire">Savoir si une clé est présente dans un dictionnaire</a></li>
<li class="toctree-l3"><a class="reference internal" href="dict.html#comparer-deux-dictionnaires">Comparer deux dictionnaires</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="dict.html#quelques-methodes-pour-les-dictionnaires">Quelques méthodes pour les dictionnaires</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="structures_de_controle.html">Les structures de contrôle</a><ul>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#l-indentation-du-code">L’indentation du code</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#structures-de-decision">Structures de décision</a><ul>
<li class="toctree-l3"><a class="reference internal" href="structures_de_controle.html#l-instruction-if">L’instruction <em>if</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="structures_de_controle.html#l-instruction-else">L’instruction <em>else</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="structures_de_controle.html#l-instruction-elif">L’instruction <em>elif</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="structures_de_controle.html#l-operateur-ternaire">L’opérateur ternaire</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#exercice">Exercice</a></li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#structures-iteratives">Structures itératives</a><ul>
<li class="toctree-l3"><a class="reference internal" href="structures_de_controle.html#l-instruction-while">L’instruction <em>while</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="structures_de_controle.html#l-instruction-for">L’instruction <em>for</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="structures_de_controle.html#la-fonction-range">La fonction <em>range</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="structures_de_controle.html#interrompre-un-bloc-d-iteration">Interrompre un bloc d’itération</a></li>
<li class="toctree-l3"><a class="reference internal" href="structures_de_controle.html#structure-iterative-avec-else">Structure itérative avec <em>else</em></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="structures_de_controle.html#id1">Exercice</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fonction_avance.html">Les fonctions (notions avancées)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fonction_avance.html#decompactage-des-parametres">décompactage des paramètres</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction_avance.html#compactage-des-parametres">compactage des paramètres</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction_avance.html#appel-recursif-de-fonction">Appel récursif de fonction</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction_avance.html#declaration-de-fonction-dans-une-fonction">Déclaration de fonction dans une fonction</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction_avance.html#la-fonction-comme-type-python">La fonction comme type Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="fonction_avance.html#les-fonctions-anonymes-lambdas">Les fonctions anonymes (lambdas)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="list_comprehension.html">Liste en compréhension</a><ul>
<li class="toctree-l2"><a class="reference internal" href="list_comprehension.html#dictionnaire-en-comprehension">Dictionnaire en compréhension</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="module.html">Les modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="module.html#le-module-pour-prevenir-la-collision-de-nom">Le module pour prévenir la collision de nom</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#la-bibliotheque-standard-python">La bibliothèque standard Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#importer-un-module">Importer un module</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#importer-directement-un-nom">Importer directement un nom</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#creer-un-module-a-partir-d-un-fichier">Créer un module à partir d’un fichier</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#module-executable">Module exécutable</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#creer-un-module-a-partir-d-un-repertoire">Créer un module à partir d’un répertoire</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#module-repertoire-executable">Module répertoire exécutable</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#chemin-des-modules">Chemin des modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="module.html#les-packages">Les <em>packages</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="module.html#import-relatif">Import relatif</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="module.html#exercices">Exercices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="decorateur.html">Les décorateurs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="decorateur.html#un-premier-decorateur">Un premier décorateur</a></li>
<li class="toctree-l2"><a class="reference internal" href="decorateur.html#decorer-des-fonctions-avec-des-parametres-et-des-valeurs-de-retour">Décorer des fonctions avec des paramètres et des valeurs de retour</a></li>
<li class="toctree-l2"><a class="reference internal" href="decorateur.html#decorateur-avec-des-parametres">Décorateur avec des paramètres</a></li>
<li class="toctree-l2"><a class="reference internal" href="decorateur.html#conserver-la-documentation-malgre-l-utilisation-d-un-decorateur">Conserver la documentation malgré l’utilisation d’un décorateur</a></li>
<li class="toctree-l2"><a class="reference internal" href="decorateur.html#appliquer-plusieurs-decorateurs">Appliquer plusieurs décorateurs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="objet.html">La programmation orientée objet</a><ul>
<li class="toctree-l2"><a class="reference internal" href="objet.html#la-classe-et-les-instances">La classe et les instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#les-attributs">Les attributs</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#les-attributs-implicites">Les attributs implicites</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#les-methodes">Les méthodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#le-constructeur">Le constructeur</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#les-proprietes">Les propriétés</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#les-attributs-de-classe">Les attributs de classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#methodes-de-classe">Méthodes de classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#methodes-statiques">Méthodes statiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#visibilite-des-attributs-et-des-methodes">Visibilité des attributs et des méthodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#fermer-la-liste-des-attributs">Fermer la liste des attributs</a></li>
<li class="toctree-l2"><a class="reference internal" href="objet.html#creer-des-objets-avec-des-attributs-constants">Créer des objets avec des attributs constants</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="heritage.html">Héritage et polymorphisme</a><ul>
<li class="toctree-l2"><a class="reference internal" href="heritage.html#l-heritage">L’héritage</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage.html#constructeur-et-heritage">Constructeur et héritage</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage.html#heritage-et-mutualisation-de-code">Héritage et mutualisation de code</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage.html#la-classe-object">La classe <em>object</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage.html#le-polymorphisme">Le polymorphisme</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage.html#polymorphisme-et-duck-typing">Polymorphisme et <em>duck typing</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage.html#masquer-les-attributs-et-les-methodes-pour-les-classe-filles">Masquer les attributs et les méthodes pour les classe filles</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage.html#heritage-multiple-et-mixin">Héritage multiple et <em>mixin</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="heritage.html#l-heritage-en-diamant">L’héritage en diamant</a></li>
<li class="toctree-l3"><a class="reference internal" href="heritage.html#appel-des-constructeurs">Appel des constructeurs</a></li>
<li class="toctree-l3"><a class="reference internal" href="heritage.html#les-mixins">Les mixins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="heritage.html#la-meta-classe">La méta-classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="heritage.html#classes-et-methodes-abstraites">Classes et méthodes abstraites</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="exception.html">Les exceptions et la gestion des erreurs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="exception.html#traiter-une-exception">Traiter une exception</a><ul>
<li class="toctree-l3"><a class="reference internal" href="exception.html#recuperer-les-donnees-d-une-exception">Récupérer les données d’une exception</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="exception.html#clause-else">Clause <em>else</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="exception.html#post-traitement">Post-traitement</a></li>
<li class="toctree-l2"><a class="reference internal" href="exception.html#lever-une-exception">Lever une exception</a></li>
<li class="toctree-l2"><a class="reference internal" href="exception.html#creer-son-exception">Créer son exception</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Les méthodes spéciales (<em>dunders</em>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#methodes-speciales-elementaires">Méthodes spéciales élémentaires</a></li>
<li class="toctree-l2"><a class="reference internal" href="#methodes-speciales-pour-les-conversions">Méthodes spéciales pour les conversions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#methodes-speciales-pour-les-operateurs-unaires">Méthodes spéciales pour les opérateurs unaires</a></li>
<li class="toctree-l2"><a class="reference internal" href="#methodes-speciales-pour-les-operations-arithmetiques">Méthodes spéciales pour les opérations arithmétiques</a></li>
<li class="toctree-l2"><a class="reference internal" href="#methodes-speciales-pour-la-comparaison">Méthodes spéciales pour la comparaison</a></li>
<li class="toctree-l2"><a class="reference internal" href="#methodes-speciales-pour-les-conteneurs">Méthodes spéciales pour les conteneurs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tout-est-objet">Tout est objet !</a></li>
<li class="toctree-l2"><a class="reference internal" href="#les-fonctions-comme-objet">Les fonctions comme objet</a></li>
<li class="toctree-l2"><a class="reference internal" href="#les-classes-comme-objet">Les classes comme objet</a></li>
<li class="toctree-l2"><a class="reference internal" href="#et-bien-d-autres-methodes-speciales">Et bien d’autres méthodes spéciales…</a></li>
<li class="toctree-l2"><a class="reference internal" href="#methodes-speciales-et-classes-abstraites">Méthodes spéciales et classes abstraites</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="iterateur_generateur.html">Itérateurs et Générateurs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="iterateur_generateur.html#les-iterateurs">Les itérateurs</a></li>
<li class="toctree-l2"><a class="reference internal" href="iterateur_generateur.html#les-fonctions-iter-et-next">Les fonctions iter() et next()</a></li>
<li class="toctree-l2"><a class="reference internal" href="iterateur_generateur.html#les-generateurs">Les générateurs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="iterateur_generateur.html#les-fonctions-generatrices-avec-yield">Les fonctions génératrices avec <em>yield</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="iterateur_generateur.html#les-generateurs-en-comprehension">Les générateurs en compréhension</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="iterateur_generateur.html#les-fonctions-enumerate-map-zip-filter">Les fonctions <em>enumerate</em>, <em>map</em>, <em>zip</em>, <em>filter</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="iterateur_generateur.html#le-module-itertools">Le module <em>itertools</em></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fichier.html">Gestion des fichiers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fichier.html#ouvrir-et-fermer-un-fichier">Ouvrir et fermer un fichier</a></li>
<li class="toctree-l2"><a class="reference internal" href="fichier.html#lire-le-contenu-d-un-fichier">Lire le contenu d’un fichier</a></li>
<li class="toctree-l2"><a class="reference internal" href="fichier.html#les-modes-de-fichier">Les modes de fichier</a><ul>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#specificite-du-mode-texte">Spécificité du mode texte</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="fichier.html#ecrire-dans-un-fichier">Écrire dans un fichier</a></li>
<li class="toctree-l2"><a class="reference internal" href="fichier.html#chemin-de-fichier">Chemin de fichier</a><ul>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#le-module-os-path">Le module <em>os.path</em></a></li>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#le-module-pathlib">Le module <em>pathlib</em></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="fichier.html#actions-sur-les-fichiers-et-les-repertoires">Actions sur les fichiers et les répertoires</a><ul>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#connaitre-le-repertoire-de-travail">Connaître le répertoire de travail</a></li>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#connaitre-le-repertoire-de-l-utilisateur">Connaître le répertoire de l’utilisateur</a></li>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#copier-un-fichier">Copier un fichier</a></li>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#supprimer-un-fichier">Supprimer un fichier</a></li>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#creer-un-repertoire">Créer un répertoire</a></li>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#supprimer-un-repertoire">Supprimer un répertoire</a></li>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#verifier-qu-un-fichier-existe">Vérifier qu’un fichier existe</a></li>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#lister-le-contenu-d-un-repertoire">Lister le contenu d’un répertoire</a></li>
<li class="toctree-l3"><a class="reference internal" href="fichier.html#rechercher-des-fichiers">Rechercher des fichiers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="fichier.html#lecture-de-fichiers-csv">Lecture de fichiers CSV</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="unittest.html">Les tests unitaires automatisés avec unittest</a><ul>
<li class="toctree-l2"><a class="reference internal" href="unittest.html#structure-d-une-classe-de-test">Structure d’une classe de test</a><ul>
<li class="toctree-l3"><a class="reference internal" href="unittest.html#execution-des-tests">Exécution des tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="unittest.html#tester-des-exceptions">Tester des exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="unittest.html#utilisation-de-doublure">Utilisation de doublure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="unittest.html#utilisation-d-un-objet-mock">Utilisation d’un objet <em>mock</em></a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Boomerang Consulting - Python 3</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Accueil</a> &raquo;</li>
        
      <li>Les méthodes spéciales (<em>dunders</em>)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="iterateur_generateur.html" class="btn btn-neutral float-right" title="Itérateurs et Générateurs" accesskey="n">Suivant <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="exception.html" class="btn btn-neutral" title="Les exceptions et la gestion des erreurs" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Précédent</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="les-methodes-speciales-dunders">
<h1>Les méthodes spéciales (<em>dunders</em>)<a class="headerlink" href="#les-methodes-speciales-dunders" title="Lien permanent vers ce titre">¶</a></h1>
<p>Une classe peut déclarer des méthodes spéciales. Ces méthodes sont destinées
à permettre à un objet d’avoir des comportements particuliers. Par exemple,
comment faire pour que les instances de notre classe <code class="docutils literal notranslate"><span class="pre">Vecteur</span></code> puissent
être utilisées avec des opérateurs arithmétiques ? Il suffit que la classe
fournisse une implémentation pour une ou plusieurs méthodes spéciales.
Ces méthodes sont facilement reconnaissables car leur nom est encadré
par deux caractères soulignés (<em>double underscores</em>) comme par exemple
<a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__add__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__add__()</span></code></a>. Cela a valu à ces méthodes leur surnom (non officiel)
de <em>dunder</em>. La documentation Python y fait parfois référence sous le nom
de <em>magic methods</em>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Si une méthode spéciale ne peut pas réaliser correctement son traitement
à cause de la valeur ou du type d’un des paramètres qui lui sont transmis, elle
doit retourner le mot-clé spécial <a class="reference external" href="https://docs.python.org/3.6/library/constants.html#NotImplemented" title="(disponible dans Python v3.6)"><code class="xref any docutils literal notranslate"><span class="pre">NotImplemented</span></code></a> ou produire une exception.</p>
</div>
<div class="section" id="methodes-speciales-elementaires">
<h2>Méthodes spéciales élémentaires<a class="headerlink" href="#methodes-speciales-elementaires" title="Lien permanent vers ce titre">¶</a></h2>
<p>Nous avons déjà traité d’une méthode spéciale : la méthode <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__init__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code></a>
qui désigne le constructeur. Pour des usages plus avancés, on peut définir
les méthodes <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__new__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__new__()</span></code></a> et <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__del__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__del__()</span></code></a> pour réaliser
les traitements de création et de suppression des objets.</p>
<p>On peut également déclarer la méthode <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__repr__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__repr__()</span></code></a> qui doit retourner
la chaîne de caractères correspondant à la représentation de l’objet. Cette
méthode est appelée directement par la fonction <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#repr" title="(disponible dans Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">repr()</span></code></a>. C’est également
cette méthode qui est utilisée par la console Python pour afficher un objet.
Si nous reprenons comme exemple notre classe <code class="docutils literal notranslate"><span class="pre">Vecteur</span></code> du chapitre sur la
programmation objet, nous pouvons proposer une implémentation pour la méthode
<a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__repr__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__repr__()</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>

<span class="k">class</span> <span class="nc">Vecteur</span><span class="p">:</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">norme</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">calculer_produit_scalaire</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">v</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">v</span><span class="o">.</span><span class="n">y</span>

    <span class="k">def</span> <span class="nf">normaliser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">norme</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">norme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">/=</span> <span class="n">norme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">/=</span> <span class="n">norme</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;Vecteur({self.x},{self.y})&quot;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span>
<span class="go">Vecteur(5,15)</span>
</pre></div>
</div>
<p>La méthode <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__hash__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__hash__()</span></code></a> permet de produire un nombre de hachage.
Ce nombre est nécessaire si votre objet doit être ajouté dans un ensemble
ou comme clé d’un dictionnaire. Deux objets égaux doivent avoir le même nombre
de hachage. Par contre l’inverse n’est pas nécessairement vrai. Le calcul d’un
nombre de hachage n’est pas trivial car ce nombre est utilisé en interne par
les ensembles et les dictionnaires pour garantir l’unicité des objets mais aussi pour assurer
une bonne performance dans l’accès aux données. La fonction <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#hash" title="(disponible dans Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">hash()</span></code></a> peut
vous aider à le calculer à partir des attributs d’un objet si ces derniers
peuvent eux-mêmes produire une valeur de hachage. Il peut être intéressant de
produire une valeur de hachage pour les instances de notre classe <code class="docutils literal notranslate"><span class="pre">Vecteur</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>

<span class="k">class</span> <span class="nc">Vecteur</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">norme</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">calculer_produit_scalaire</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">v</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">v</span><span class="o">.</span><span class="n">y</span>

    <span class="k">def</span> <span class="nf">normaliser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">norme</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">norme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">/=</span> <span class="n">norme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">/=</span> <span class="n">norme</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;Vecteur({self.x},{self.y})&quot;</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
</pre></div>
</div>
<p>De cette manière, une instance de <code class="docutils literal notranslate"><span class="pre">Vecteur</span></code> peut être ajoutée dans un ensemble.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v2</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v3</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ensemble_vecteurs</span> <span class="o">=</span> <span class="p">{</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ensemble_vecteurs</span>
<span class="go">{Vecteur(1,2), Vecteur(5,4)}</span>
</pre></div>
</div>
<div class="admonition caution">
<p class="admonition-title">Prudence</p>
<p>La valeur de hachage est généralement dépendante de l’état interne de l’objet.
Pour notre classe <code class="docutils literal notranslate"><span class="pre">Vecteur</span></code>, cette valeur est par exemple calculée à partir
des valeurs des attributs <code class="docutils literal notranslate"><span class="pre">x</span></code> et <code class="docutils literal notranslate"><span class="pre">y</span></code>. Si ces valeurs changent, la valeur
de hachage changera également. Hors, pour que les ensembles et les clés
de dictionnaire fonctionnent correctement, la valeur de hachage ne doit
plus changer à partir du moment où l’objet est ajouté dans un ensemble ou
qu’il est utilisé comme clé dans un dictionnaire. Soit le développeur
qui utilise les objets doit s’assurer que l’état de l’objet ne changera pas,
soit le développeur de la classe doit s’assurer qu’une fois l’état de l’objet
positionné, il n’est plus possible de le modifier. C’est cette dernière
stratégie qui est la plus sûr et qui est utilisée dans l’API standard de
Python. On parle alors <strong>d’immutabilité</strong> des objets ou de classe
<strong>immutable</strong>. C’est pour cette raison que les classes <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#int" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>,
<a class="reference external" href="https://docs.python.org/3.6/library/functions.html#float" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>, <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#bool" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>, <a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> et <a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#tuple" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a> sont immutables.
Il n’est pas possible d’altérer l’état interne des objets une fois créés.
Une opération de modification produit en fait un nouvel objet avec le nouvel état.</p>
<p>Pour notre exemple de la classe <code class="docutils literal notranslate"><span class="pre">Vecteur</span></code>, il faudrait réfléchir à deux
fois à notre implémentation car la méthode <code class="docutils literal notranslate"><span class="pre">normaliser()</span></code> modifie l’état
interne d’un objet de ce type. Soit il faut revoir l’implémentation de cette
méthode afin qu’elle produise un nouvel objet, soit il faudra peut-être abandonner
l’idée qu’un objet de type <code class="docutils literal notranslate"><span class="pre">Vecteur</span></code> produise une valeur de hachage.</p>
</div>
</div>
<div class="section" id="methodes-speciales-pour-les-conversions">
<h2>Méthodes spéciales pour les conversions<a class="headerlink" href="#methodes-speciales-pour-les-conversions" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il est possible de réaliser des conversions lorsque l’objet est passé en paramètre
de certaines fonctions. La conversion en valeur booléenne est également utilisée
lorsqu’un objet doit être évalué comme expression booléenne dans une structure
<a class="reference external" href="https://docs.python.org/3.6/reference/compound_stmts.html#if" title="(disponible dans Python v3.6)"><code class="xref any docutils literal notranslate"><span class="pre">if</span></code></a> ou <a class="reference external" href="https://docs.python.org/3.6/reference/compound_stmts.html#while" title="(disponible dans Python v3.6)"><code class="xref any docutils literal notranslate"><span class="pre">while</span></code></a>.</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Méthode spéciale</p></th>
<th class="head"><p>fonction de conversion</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__str__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__str__(self)</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__bytes__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__bytes__(self)</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#bytes" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__bool__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__bool__(self)</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3.6/library/functions.html#bool" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a> ou expression booléenne</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__int__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__int__(self)</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3.6/library/functions.html#int" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__float__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__float__(self)</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3.6/library/functions.html#float" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__complex__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__complex__(self)</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3.6/library/functions.html#complex" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">complex</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">__dict__(self)</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#dict" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a></p></td>
</tr>
</tbody>
</table>
<p>Pour notre classe <code class="docutils literal notranslate"><span class="pre">Vector</span></code>, en nous inspirant du fonctionnement des nombres
en Python, nous pourrions considérer qu’un vecteur est évalué à <a class="reference external" href="https://docs.python.org/3.6/library/constants.html#True" title="(disponible dans Python v3.6)"><code class="xref any docutils literal notranslate"><span class="pre">True</span></code></a>
si ses coordonnées sont différentes de zéro. La conversion en chaîne de caractères
est également utile.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vecteur</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">!=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;({self.x},{self.y})&quot;</span>

    <span class="c1"># reste du code omis</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;évalué à False&quot;</span><span class="p">)</span>
<span class="c1"># Affiche évalué à False</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="k">if</span> <span class="n">v</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;évalué à True&quot;</span><span class="p">)</span>
<span class="c1"># Affiche évalué à True</span>

<span class="k">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="c1"># Affiche (5,4)</span>
</pre></div>
</div>
</div>
<div class="section" id="methodes-speciales-pour-les-operateurs-unaires">
<h2>Méthodes spéciales pour les opérateurs unaires<a class="headerlink" href="#methodes-speciales-pour-les-operateurs-unaires" title="Lien permanent vers ce titre">¶</a></h2>
<p>Si les objets doivent pouvoir être utilisés avec les opérateurs unaires <code class="docutils literal notranslate"><span class="pre">+</span></code>,
<code class="docutils literal notranslate"><span class="pre">-</span></code> ou s’ils peuvent être passés en paramètre de la fonction <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#abs" title="(disponible dans Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">abs()</span></code></a>,
vous devez fournir respectivement une implémentation des méthodes
<a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__pos__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__pos__(self)</span></code></a>, <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__neg__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__neg__(self)</span></code></a>,
<a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__abs__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__abs__(self)</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vecteur</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Vecteur</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

    <span class="c1"># reste du code omis</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="o">-</span><span class="n">v</span>
<span class="go">Vecteur(-2,-3)</span>
</pre></div>
</div>
</div>
<div class="section" id="methodes-speciales-pour-les-operations-arithmetiques">
<h2>Méthodes spéciales pour les opérations arithmétiques<a class="headerlink" href="#methodes-speciales-pour-les-operations-arithmetiques" title="Lien permanent vers ce titre">¶</a></h2>
<p>Si les objets doivent pouvoir être utilisés dans des opérations arithmétiques,
alors vous pouvez fournir une implémentation pour les méthodes suivantes :</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Méthode spéciale</p></th>
<th class="head"><p>opérateur ou fonction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__add__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__add__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">+</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__sub__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__sub__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">-</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__mul__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__mul__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__matmul__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__matmul__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__truediv__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__truediv__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">/</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__floordiv__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__floordiv__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">//</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__mod__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__mod__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">%</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__divmod__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__divmod__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3.6/library/functions.html#divmod" title="(disponible dans Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">divmod()</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__pow__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__pow__(self,</span> <span class="pre">o,</span> <span class="pre">modulo)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">**</span></code> ou <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#pow" title="(disponible dans Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">pow()</span></code></a></p></td>
</tr>
</tbody>
</table>
<p>Ces méthodes prennent toutes en paramètres <code class="docutils literal notranslate"><span class="pre">self</span></code> et le deuxième opérande de
l’opérateur arithmétique. <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__pow__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__pow__(self,</span> <span class="pre">o,</span> <span class="pre">modulo)</span></code></a>
accepte un troisième paramètre optionnel correspondant à la valeur du modulo
passée en paramètre de la fonction <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#pow" title="(disponible dans Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">pow()</span></code></a>. Ces méthodes doivent retourner
le résultat de l’opération sauf <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__divmod__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__divmod__(self,</span> <span class="pre">o)</span></code></a>
qui doit retourner le résultat de la division et le reste pour être conforme
à <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#divmod" title="(disponible dans Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">divmod()</span></code></a>. Normalement, ces méthodes ne doivent pas modifier l’état interne
de l’objet mais, au plus, produire un nouvel objet (comme par exemple pour le
résultat de l’addition).</p>
<p>Pour notre classe <code class="docutils literal notranslate"><span class="pre">Vecteur</span></code>, nous pouvons, par exemple, autoriser l’addition de
deux vecteurs ou d’un vecteur avec un scalaire.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vecteur</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">Vecteur</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">v</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Vecteur</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Vecteur</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="c1"># reste du code omis</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span>
<span class="go">Vecteur(2,3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v2</span> <span class="o">=</span> <span class="n">v1</span> <span class="o">+</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v2</span>
<span class="go">Vecteur(4,5)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v3</span> <span class="o">=</span> <span class="n">v1</span> <span class="o">+</span> <span class="n">v2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v3</span>
<span class="go">Vecteur(6,8)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Remarquez l’utilisation du mot-clé <a class="reference external" href="https://docs.python.org/3.6/library/constants.html#NotImplemented" title="(disponible dans Python v3.6)"><code class="xref any docutils literal notranslate"><span class="pre">NotImplemented</span></code></a> pour le cas
où l’addition ne concerne ni un scalaire, ni un vecteur. Le fait de retourner
ce mot-clé produira une erreur de type <a class="reference external" href="https://docs.python.org/3.6/library/exceptions.html#TypeError" title="(disponible dans Python v3.6)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> lorsque l’addition
ne sera pas possible.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">+</span> <span class="s2">&quot;ceci n&#39;est pas un nombre ni un Vecteur&quot;</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">unsupported operand type(s) for +: &#39;Vecteur&#39; and &#39;str&#39;</span>
</pre></div>
</div>
</div>
<p>La classe peut fournir une implémentation pour les méthodes dont le nom
commence par un <code class="docutils literal notranslate"><span class="pre">r</span></code> (pour <em>right</em>).
Ces méthodes seront appelées si l’objet est présent à droite d’un opérateur
binaire et l’objet à gauche ne supporte pas l’opération.</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Méthode</p></th>
<th class="head"><p>opérateur</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__radd__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__radd__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">+</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__rsub__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__rsub__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">-</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__rmul__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__rmul__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__rmatmul__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__rmatmul__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__rtruediv__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__rtruediv__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">/</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__rfloordiv__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__rfloordiv__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">//</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__rmod__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__rmod__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">%</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__rpow__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__rpow__(self,</span> <span class="pre">o,</span> <span class="pre">modulo)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">**</span></code></p></td>
</tr>
</tbody>
</table>
<p>Par exemple pour additionner un scalaire à un vecteur, il faut fournir une
implémentation pour la méthode <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__radd__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__radd__(self,</span> <span class="pre">o)</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vecteur</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">Vecteur</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">v</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Vecteur</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Vecteur</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__add__</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

    <span class="c1"># reste du code omis</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">10</span> <span class="o">+</span> <span class="n">v</span>
<span class="go">Vecteur(12,13)</span>
</pre></div>
</div>
<p>Pour notre exemple, l’implémentation de la méthode <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__radd__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__radd__(self,</span> <span class="pre">o)</span></code></a>
se contente de retourner le résultat de l’appel à <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__add__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__add__(self,</span> <span class="pre">o)</span></code></a>
puisque l’addition est commutative.</p>
<p>Enfin, la classe peut fournir une implémentation pour les opérateurs <em>in-place</em>.
Il s’agit des opérateurs qui réalisent une opération et une affectation dans le
même temps.</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Méthode</p></th>
<th class="head"><p>opérateur</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__iadd__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__iadd__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">+=</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__isub__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__isub__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">-=</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__imul__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__imul__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">*=</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__imatmul__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__imatmul__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;=</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__itruediv__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__itruediv__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">/=</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__ifloordiv__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__ifloordiv__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">//=</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__imod__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__imod__(self,</span> <span class="pre">o)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">%=</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__ipow__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__ipow__(self,</span> <span class="pre">o,</span> <span class="pre">modulo)</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">**=</span></code></p></td>
</tr>
</tbody>
</table>
<p>Généralement, l’implémentation de ces méthodes permet simplement une optimisation.
Si ces méthodes ne sont pas présentes alors l’interpréteur appelle la méthode arithmétique
équivalente et affecte le résultat à la variable. Ainsi, si l’appel à la méthode
<a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__iadd__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__iadd__(self,</span> <span class="pre">o)</span></code></a> produit un résultat <a class="reference external" href="https://docs.python.org/3.6/library/constants.html#NotImplemented" title="(disponible dans Python v3.6)"><code class="xref any docutils literal notranslate"><span class="pre">NotImplemented</span></code></a>,
l’instruction</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">+=</span> <span class="n">b</span>
</pre></div>
</div>
<p>sera réalisée par l’interpréteur sous la forme :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="fm">__add__</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<p>Comme on s’attend généralement à ce que les opérateurs <em>in-place</em> modifient
directement l’objet, fournir une implémentation pour ces opérateurs évite de
créer un objet intermédiaire.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vecteur</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">v</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">v</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Vecteur</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">v</span><span class="o">.</span><span class="n">x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">v</span><span class="o">.</span><span class="n">y</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="c1"># reste du code omis</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v2</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span> <span class="o">+=</span> <span class="n">v2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span>
<span class="go">Vecteur(12,53)</span>
</pre></div>
</div>
</div>
<div class="section" id="methodes-speciales-pour-la-comparaison">
<h2>Méthodes spéciales pour la comparaison<a class="headerlink" href="#methodes-speciales-pour-la-comparaison" title="Lien permanent vers ce titre">¶</a></h2>
<p>Par défaut, l’opérateur d’égalité <code class="docutils literal notranslate"><span class="pre">==</span></code> permet de comparer l’unicité en mémoire
des objets. Ainsi les deux vecteurs ci-dessous ne sont pas égaux :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v2</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span> <span class="o">==</span> <span class="n">v2</span>
<span class="go">False</span>
</pre></div>
</div>
<p>En effet, nous créons deux objets distincts que nous affectons respectivement
à la variable <code class="docutils literal notranslate"><span class="pre">v1</span></code> et à la variable <code class="docutils literal notranslate"><span class="pre">v2</span></code>.</p>
<p>Mais il serait plus intéressant de considérer que deux vecteurs sont égaux
s’ils ont les mêmes valeurs pour x et pour y. Nous pouvons modifier ce comportement
par défaut en fournissant notre propre méthode d’égalité :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vecteur</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Vecteur</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">x</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">y</span>
        <span class="k">return</span> <span class="bp">False</span>

    <span class="c1"># reste du code omis</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v2</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span> <span class="o">==</span> <span class="n">v2</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>En Python, si vous désirez vérifier s’il s’agit ou non du même objet en mémoire,
il faut utiliser le mot clé <a class="reference external" href="https://docs.python.org/3.6/reference/expressions.html#is" title="(disponible dans Python v3.6)"><code class="docutils literal notranslate"><span class="pre">Identity</span> <span class="pre">comparisons</span></code></a>. Ainsi :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v2</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span> <span class="ow">is</span> <span class="n">v1</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v1</span> <span class="ow">is</span> <span class="n">v2</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
<p>Ci-dessous, la liste des méthodes spéciales pour les opérateurs de comparaison :</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Méthode spéciale</p></th>
<th class="head"><p>Opérateur de comparaison</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__eq__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__eq__(self,</span> <span class="pre">v)</span></code></a></p></td>
<td><p>o == v</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__ne__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__ne__(self,</span> <span class="pre">v)</span></code></a></p></td>
<td><p>o != v</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__lt__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__lt__(self,</span> <span class="pre">v)</span></code></a></p></td>
<td><p>o &lt; v</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__le__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__le__(self,</span> <span class="pre">v)</span></code></a></p></td>
<td><p>o &lt;= v</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__gt__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__gt__(self,</span> <span class="pre">v)</span></code></a></p></td>
<td><p>o &gt; v</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__ge__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__ge__(self,</span> <span class="pre">v)</span></code></a></p></td>
<td><p>o &gt;= v</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>S’il n’existe pas d’implémentation pour la méthode
<a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__ne__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__ne__(self,</span> <span class="pre">v)</span></code></a>, alors l’interpréteur qui tente
de résoudre l’instruction :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">o</span> <span class="o">!=</span> <span class="n">v</span>
</pre></div>
</div>
<p>appellera à la place :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ow">not</span> <span class="n">o</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Astuce</p>
<p>Si vous souhaitez que les séquences de vos objets soient triables
grâce à la fonction <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#sorted" title="(disponible dans Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">sorted()</span></code></a>, vous devez au minimum fournir
une implémentation pour les méthodes <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__eq__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__eq__(self,</span> <span class="pre">v)</span></code></a>
et <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__lt__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__lt__(self,</span> <span class="pre">v)</span></code></a>.</p>
</div>
</div>
<div class="section" id="methodes-speciales-pour-les-conteneurs">
<h2>Méthodes spéciales pour les conteneurs<a class="headerlink" href="#methodes-speciales-pour-les-conteneurs" title="Lien permanent vers ce titre">¶</a></h2>
<p>Si vos objets doivent se comporter comme un conteneur (c’est-à-dire comme une
liste ou un dictionnaire), vous pouvez fournir l’implémentation de méthodes
spéciales telles que :</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Méthode spéciale</p></th>
<th class="head"><p>Cas d’utilisation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__len__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__len__(self)</span></code></a></p></td>
<td><p>utilisation de la méthode <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#len" title="(disponible dans Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">len()</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__getitem__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__getitem__(self,</span> <span class="pre">key)</span></code></a></p></td>
<td><p>o[key]</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__setitem__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__setitem__(self,</span> <span class="pre">key,</span> <span class="pre">value)</span></code></a></p></td>
<td><p>o[key] = value</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__delitem__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__delitem__(self,</span> <span class="pre">key)</span></code></a></p></td>
<td><p>del o[key]</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__contains__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__contains__(self,</span> <span class="pre">key)</span></code></a></p></td>
<td><p>key in o</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Vecteur</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span> <span class="ow">or</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
        <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span> <span class="ow">or</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span>
        <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span> <span class="ow">or</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">elif</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span> <span class="ow">or</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

    <span class="c1"># reste du code omis</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">Vecteur</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span>
<span class="go">Vecteur(-2,-5)</span>
</pre></div>
</div>
</div>
<div class="section" id="tout-est-objet">
<h2>Tout est objet !<a class="headerlink" href="#tout-est-objet" title="Lien permanent vers ce titre">¶</a></h2>
<p>En découvrant les méthodes spéciales en Python, on se rend compte que les opérateurs
arithmétiques ne sont que des raccourcis d’écriture pour les méthodes telles
que <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__add__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__add__(self,</span> <span class="pre">o)</span></code></a> ou <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__sub__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__sub__(self,</span> <span class="pre">o)</span></code></a>.
Il en va de même pour les opérateurs <code class="docutils literal notranslate"><span class="pre">[]</span></code> ou même les opérations booléennes.</p>
<p>En fait en Python, <strong>tout est un objet</strong> ! Les nombres sont des objets et il
est donc possible d’écrire :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="fm">__add__</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">3</span>
</pre></div>
</div>
<p>Les objets représentant les entiers ont même des méthodes propres comme
<a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#int.bit_length" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">bit_length()</span></code></a> pour connaître la taille en bits nécessaire pour stocker
la valeur.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">bit_length</span><span class="p">()</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="mi">1000000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">bit_length</span><span class="p">()</span>
<span class="go">20</span>
</pre></div>
</div>
<p><a class="reference external" href="https://docs.python.org/3.6/library/functions.html#int" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#float" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>, <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#complex" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">complex</span></code></a>, <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#bool" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>, <a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#tuple" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>,
<a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#list" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>, <a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#set" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a>, <a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#dict" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> ne sont pas des fonctions mais les
classes de ces différents types. Il est donc possible de créer des classes en
héritant de ces types. Les classes <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#int" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#float" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>, <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#complex" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">complex</span></code></a>
et <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#bool" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a> héritent même d’une classe commune : la classe <a class="reference external" href="https://docs.python.org/3.6/library/numbers.html#numbers.Number" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numbers.Number</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">numbers</span> <span class="kn">import</span> <span class="n">Number</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">Number</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">Number</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="mi">1j</span><span class="p">,</span> <span class="n">Number</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">Number</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="les-fonctions-comme-objet">
<h2>Les fonctions comme objet<a class="headerlink" href="#les-fonctions-comme-objet" title="Lien permanent vers ce titre">¶</a></h2>
<p>En Python, une fonction (et une méthode) est aussi un objet de type <code class="xref py py-class docutils literal notranslate"><span class="pre">function</span></code>.
Il existe une seule instance d’une fonction et on peut utiliser son nom pour
accéder à ses attributs.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">compter</span><span class="p">():</span>
    <span class="n">compter</span><span class="o">.</span><span class="n">_cpt</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">compter</span><span class="p">,</span> <span class="s2">&quot;_cpt&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">compter</span><span class="o">.</span><span class="n">_cpt</span>
</pre></div>
</div>
<p>Dans l’exemple ci-dessus, la fonction <code class="docutils literal notranslate"><span class="pre">compter()</span></code> mémorise une valeur dans
son attribut privé <code class="docutils literal notranslate"><span class="pre">_cpt</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">compter</span><span class="p">())</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">compter</span><span class="p">())</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">compter</span><span class="p">())</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">compter</span><span class="p">())</span>
<span class="go">4</span>
</pre></div>
</div>
<p>De même un objet peut se comporter comme une fonction. Pour cela, il suffit
d’implémenter la méthode spéciale <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__call__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__call__(self,</span> <span class="pre">args)</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numbers</span> <span class="kn">import</span> <span class="n">Number</span>


<span class="k">class</span> <span class="nc">Step</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Permet de réaliser un incrément ou un décrément d&#39;une valeur&quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">inc</span><span class="p">(</span><span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Step</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">dec</span><span class="p">(</span><span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Step</span><span class="p">(</span><span class="o">-</span><span class="n">step</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_step</span> <span class="o">=</span> <span class="n">step</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">valeur</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">valeur</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span>
        <span class="n">valeur</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_step</span>
        <span class="k">return</span> <span class="n">valeur</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">inc</span> <span class="o">=</span> <span class="n">Step</span><span class="o">.</span><span class="n">inc</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inc</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dec</span> <span class="o">=</span> <span class="n">Step</span><span class="o">.</span><span class="n">dec</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dec</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
<p>La fonction <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#callable" title="(disponible dans Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">callable()</span></code></a> permet de découvrir sur une variable ou un paramètre
représente un type appelable, c’est-à-dire une fonction ou un objet disposant
de la méthode <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__call__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__call__(self,</span> <span class="pre">args)</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">callable</span><span class="p">(</span><span class="k">print</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Comme un objet peut se comporter comme une fonction, alors il est possible
d’utiliser une classe également comme un décorateur.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Traceur</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">msg_debut</span><span class="o">=</span><span class="s2">&quot;Appel&quot;</span><span class="p">,</span> <span class="n">msg_fin</span><span class="o">=</span><span class="s2">&quot;Fin appel&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func</span> <span class="o">=</span> <span class="n">func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg_debut</span> <span class="o">=</span> <span class="n">msg_debut</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg_fin</span> <span class="o">=</span> <span class="n">msg_fin</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;{self.msg_debut} {self.func.__name__} args={args} kwargs={kwargs}&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;{self.msg_fin} {self.func.__name__}&quot;</span><span class="p">)</span>


<span class="nd">@Traceur</span>
<span class="k">def</span> <span class="nf">say_hello</span><span class="p">(</span><span class="n">nom</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Hello {nom}&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">say_hello</span><span class="p">(</span><span class="s2">&quot;David&quot;</span><span class="p">)</span>
<span class="go">Appel say_hello args=(&#39;David&#39;,) kwargs={}</span>
<span class="go">Hello David</span>
<span class="go">Fin appel say_hello</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">say_hello</span><span class="p">(</span><span class="n">nom</span><span class="o">=</span><span class="s2">&quot;David&quot;</span><span class="p">)</span>
<span class="go">Appel say_hello args=() kwargs={&#39;nom&#39;: &#39;David&#39;}</span>
<span class="go">Hello David</span>
<span class="go">Fin appel say_hello</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="les-classes-comme-objet">
<h2>Les classes comme objet<a class="headerlink" href="#les-classes-comme-objet" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les classes sont elles-mêmes des objets qui héritent de <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#type" title="(disponible dans Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code></a>. Par exemple,
une classe possède un attribut <code class="docutils literal notranslate"><span class="pre">__name__</span></code> qui contient le nom de la classe.
Ses attributs sont également composés des méthodes et des attributs de classe. Il est
donc possible de traiter une classe comme n’importe quel objet dans un programme.
On dit que Python est un <strong>langage réflexif</strong> car les éléments constitutifs du langage
sont manipulables comme n’importe quel objet.</p>
<p>Si on crée la classe <code class="docutils literal notranslate"><span class="pre">Greeting</span></code> :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Greeting</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">say_hello</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Hello {name}&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>On peut bien sûr écrire :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Greeting</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">say_hello</span><span class="p">(</span><span class="s2">&quot;David&quot;</span><span class="p">)</span>
<span class="go">Hello David</span>
</pre></div>
</div>
<p>Mais on peut également traiter la classe comme un objet :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Greeting</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">cls</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span>
<span class="go">&#39;Greeting&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s2">&quot;say_hello&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="s2">&quot;David&quot;</span><span class="p">)</span>
<span class="go">Hello David</span>
</pre></div>
</div>
<p>Les bibliothèques et les <em>frameworks</em> les plus avancés en Python peuvent ainsi
découvrir dynamiquement la structure des objets et des classes au moment de
l’exécution du programme et peuvent donc manipuler des types de données qui
n’étaient pas connus au moment de l’écriture de ces bibliothèques et de ces
<em>frameworks</em>.</p>
</div>
<div class="section" id="et-bien-d-autres-methodes-speciales">
<h2>Et bien d’autres méthodes spéciales…<a class="headerlink" href="#et-bien-d-autres-methodes-speciales" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il existe encore d’autres méthodes spéciales pour la réflexivité ou encore
pour permettre de réaliser des arrondis ou des opérations binaires. Pour la liste
complète, vous pouvez consulter la documentation officielle du <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#datamodel" title="(disponible dans Python v3.6)"><code class="docutils literal notranslate"><span class="pre">Data</span> <span class="pre">model</span></code></a>.
Le chapitre suivant présente les méthodes spéciales pour les itérateurs.</p>
<p>Ci-dessous, vous trouverez l’implémentation complète de la classe <code class="docutils literal notranslate"><span class="pre">Vecteur</span></code> :</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>


<span class="k">class</span> <span class="nc">Vecteur</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Un vecteur à deux dimensions&quot;&quot;&quot;</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">norme</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">calculer_produit_scalaire</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">v</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">v</span><span class="o">.</span><span class="n">y</span>

    <span class="k">def</span> <span class="nf">normaliser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">norme</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">norme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">/=</span> <span class="n">norme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">/=</span> <span class="n">norme</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;Vecteur({self.x},{self.y})&quot;</span>

    <span class="k">def</span> <span class="nf">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">!=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;({self.x},{self.y})&quot;</span>

    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Vecteur</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">Vecteur</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">v</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Vecteur</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Vecteur</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__add__</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">v</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">v</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Vecteur</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">v</span><span class="o">.</span><span class="n">x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">v</span><span class="o">.</span><span class="n">y</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Vecteur</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">x</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">y</span>
        <span class="k">return</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span> <span class="ow">or</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
        <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span> <span class="ow">or</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span>
        <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span> <span class="ow">or</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">elif</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span> <span class="ow">or</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="methodes-speciales-et-classes-abstraites">
<h2>Méthodes spéciales et classes abstraites<a class="headerlink" href="#methodes-speciales-et-classes-abstraites" title="Lien permanent vers ce titre">¶</a></h2>
<p>Beaucoup de méthodes abstraites n’ont de sens que lorsqu’elles sont implémentées
ensemble par la même classe. Par exemple les méthodes <a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__len__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__len__(self)</span></code></a>
<a class="reference external" href="https://docs.python.org/3.6/reference/datamodel.html#object.__getitem__" title="(disponible dans Python v3.6)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__getitem__(self,</span> <span class="pre">key)</span></code></a> permettent de définir une
séquence puisqu’il est possible de connaître la taille et l’élément associé à
une clé.</p>
<p>Le module <code class="xref py py-mod docutils literal notranslate"><span class="pre">container.abc</span></code> fournit des classes abstraites qui définissent
différents contrats. Il existe par exemple la classe abstraite
<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code> qui déclare les deux méthodes de manière
abstraite.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Sequence</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">Sequence</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">Can&#39;t instantiate abstract class Sequence with abstract methods __getitem__, __len__</span>
</pre></div>
</div>
<p>Toutes les classes du module <code class="xref py py-mod docutils literal notranslate"><span class="pre">colletions.abc</span></code> sont des classes abstraites
qui sont là pour guider le développeur qui voudrait créer sa propre classe
et qui souhaiterait que les objets de cette classe se comporte suivant un contrat.
En hérite d’une des classes du module <code class="xref py py-mod docutils literal notranslate"><span class="pre">colletions.abc</span></code>, cela permet
au développeur de vérifier que son implémentation est conforme au contrat.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="iterateur_generateur.html" class="btn btn-neutral float-right" title="Itérateurs et Générateurs" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="exception.html" class="btn btn-neutral float-left" title="Les exceptions et la gestion des erreurs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Précédent</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright David Gayerie - support@boomerang-consulting.com - CC-BY-SA

    </p>
  </div>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>